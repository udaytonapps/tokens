{"version":3,"sources":["utils/helpers.ts","utils/api-connector.ts","components/DevPanel.tsx","components/Header.tsx","utils/context.ts","components/Filter.tsx","components/TableHeaderSort.tsx","components/BalancesTable.tsx","components/StatusName.tsx","components/HistoryTable.tsx","components/RequestsTable.tsx","components/TokenGraphic.tsx","components/ReviewDialog.tsx","components/SettingsDialog.tsx","components/TabPanel.tsx","views/InstructorView.tsx","components/RequestBalance.tsx","components/ConfirmationDialog.tsx","components/RequestForm.tsx","components/RequestDashboard.tsx","views/LearnerView.tsx","App.tsx","reportWebVitals.ts","index.tsx","utils/constants.ts"],"names":["getAppConfig","appInfo","environment","getEnvironment","overrides","APP_INFO_OVERRIDES","EnvConfig","process","getSessionId","appConfig","window","sessionId","getStatusColors","theme","ACCEPTED","palette","success","main","PENDING","warning","REJECTED","error","SUBMITTED","compareStrings","a","b","compareRowLastNames","compareLastNames","learner_name","includes","splitA","split","splitB","lastA","lastB","length","compareDateTime","Date","updated_at","getTime","sortBalancesByPriority","rows","requestMap","sort","pending","resolved","forEach","row","get","user_id","push","descendingComparator","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","map","el","index","a11yProps","id","formatDbDate","dateString","format","DateTime","fromFormat","DB_DATE_TIME_FORMAT","toLocaleString","DATETIME_MED","tokensAreExpired","settings","use_by_date","now","config","getInfo","axios","apiUrl","res","data","console","getInstructorSettings","addSettings","body","post","updateSettings","put","getAllBalances","getSubmittedRequests","updateRequest","updateData","log","getLearnerSettings","getLearnerRequestHistory","addRequest","categoryId","learnerComment","category_id","learner_comment","DevPanel","props","useState","expired","setExpired","setAppInfo","useEffect","then","info","Box","position","bottom","p","Card","sx","border","textAlign","Typography","username","isInstructor","Header","mt","variant","AppContext","createContext","contextId","linkId","darkMode","baseColor","Filter","filters","filterRows","buttonLabel","enumReference","setEnumReference","activeReference","setActiveReference","anchorEl","setAnchorEl","open","Boolean","undefined","newEnumReference","newActiveReference","filter","addReference","column","reference","col","handleClick","event","currentTarget","allOptionsChecked","Object","keys","find","key","applyFilters","filteredRows","type","getFilterOptions","options","display","justifyContent","Button","endIcon","FilterList","onClick","IconButton","disableRipple","Popover","onClose","anchorOrigin","vertical","horizontal","flexWrap","i","FormLabel","label","FormGroup","FormControlLabel","control","Checkbox","size","color","checked","indeterminate","toggle","allChecked","toggleAllCheckbox","fontWeight","toggleCheckbox","valueMapping","TextField","TableHeaderSort","property","columnLabel","setOrder","setOrderBy","TableSortLabel","active","direction","handleRequestSort","component","visuallyHidden","BalancesTable","setTabPosition","setFilteredRows","sortedFilteredRows","mb","FILTERS","INSTRUCTOR","BALANCES","TableContainer","Paper","Table","minWidth","TableHead","TableRow","TableCell","align","width","TableBody","minHeight","alignContent","pendingRequests","Badge","badgeContent","tokens_used","balance","colSpan","nameConfig","icon","CheckCircle","text","tooltip","Info","Cancel","StatusName","status","iconOnly","alignItems","Tooltip","title","ml","HistoryTable","openReviewDialog","useContext","statusColors","useTheme","status_name","borderLeft","scope","category_name","request_id","RequestsTable","REQUESTS","created_at","maxWidth","overflow","textOverflow","whiteSpace","styleReference","large","fontSize","outerRim","innerRim","inner","small","disabled","light","dark","TokenGraphic","count","mode","stacked","generateTokenStyles","referenceKey","height","borderRadius","backgroundColor","left","ReviewDialog","handleClose","handleSave","requestRow","actionStatus","setActionStatus","comment","setComment","readonly","setReadonly","Dialog","onSubmit","e","preventDefault","submission","instructor_comment","DialogTitle","DialogContent","DialogContentText","mr","token_cost","flexDirection","pl","fullWidth","value","multiline","minRows","maxRows","InputProps","readOnly","status_updated_at","FormControl","RadioGroup","name","onChange","newStatus","target","Radio","required","commentVal","DialogActions","SettingsDialog","useForm","defaultValues","categories","dbAction","sort_order","notifications_pref","register","handleSubmit","watch","setValue","errors","formState","useFieldArray","fields","append","move","update","remove","pref","initValues","useCallback","formattedDate","toISODate","configuration_id","initial_tokens","settingsToSubmit","parseInt","category","InputLabel","htmlFor","autoFocus","margin","InputLabelProps","shrink","inputProps","style","pattern","min","helperText","placement","InfoOutlined","moveCategoryUp","KeyboardArrowUp","moveCategoryDown","KeyboardArrowDown","placeholder","is_used","startIcon","Add","TabPanel","children","other","role","hidden","InstructorView","tabPosition","reviewDialogOpen","setReviewDialogOpen","settingsDialogOpen","setSettingsDialogOpen","setSettings","balanceRows","setBalanceRows","requestRows","setRequestRows","historyRows","setHistoryRows","requestInReview","setRequestInReview","fetchAndAssembleData","newRequestMap","Map","request","set","balances","sortedBalances","fetchedSettings","fetchedRequestRows","newlySubmittedRequests","handleSaveSettingsDialog","newSettings","retrievedSettings","handleSaveReviewDialog","reviewData","NotificationImportant","Settings","Alert","severity","borderBottom","borderColor","Tabs","newValue","Tab","requestId","HISTORY","reason","RequestBalance","ConfirmationDialog","handleConfirm","RequestForm","updateBalance","resetBalance","refreshData","sortedCategories","openDialog","setOpenDialog","submitted","setSubmitted","selectedCategory","setSelectedCategory","setLearnerComment","handleConfirmDialog","pt","fontStyle","handleSelectCategory","textTransform","RequestDashboard","activeCount","setActiveCount","LearnerView","learnerBalance","setLearnerBalance","tokensUsed","reduce","LEARNER","App","setAppconfig","defaultPrimary","primary","createTheme","components","MuiTableCell","styleOverrides","head","ThemeProvider","CssBaseline","className","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode","pre_build","local_build","deployed_build","val","charAt","toUpperCase","slice","toLowerCase"],"mappings":"qkBAmBaA,EAAe,SAACC,GAC3B,IAAMC,EAAcC,IAChBC,EAAY,GAUhB,MARoB,cAAhBF,IACFE,EAAYC,KAEU,uCACnBJ,GACAK,IAAUJ,IACVE,IAKMD,EAAiB,WAAuB,IAAD,EAGlD,OADE,UAACI,SAAD,aAAC,mBAAiD,cAIzCC,EAAe,WAC1B,IAAMC,EAAaC,OAA2BD,WAAa,KAC3D,OAAgB,OAATA,QAAS,IAATA,OAAA,EAAAA,EAAWE,YAAa,IAGpBC,EAAkB,SAACC,GAO9B,MANoD,CAClDC,SAAUD,EAAME,QAAQC,QAAQC,KAChCC,QAASL,EAAME,QAAQI,QAAQF,KAC/BG,SAAUP,EAAME,QAAQM,MAAMJ,KAC9BK,UAAWT,EAAME,QAAQI,QAAQF,OAO/BM,EAAiB,SAACC,EAAWC,GACjC,OAAID,EAAIC,GAAW,EACfD,EAAIC,EAAU,EACX,GAGIC,EAAsB,SAACF,EAAoBC,GACtD,OAAOE,EAAiBH,EAAEI,aAAcH,EAAEG,eAG/BD,EAAmB,SAACH,EAAWC,GAC1C,GAAID,EAAEK,SAAS,MAAQJ,EAAEI,SAAS,KAAM,CAEtC,IAAMC,EAASN,EAAEO,MAAM,KACjBC,EAASP,EAAEM,MAAM,KACjBE,EAAQH,EAAO,GACfI,EAAQF,EAAO,GACrB,OAAOC,IAAUC,EACbX,EAAeO,EAAOA,EAAOK,OAAS,GAAIH,EAAOA,EAAOG,OAAS,IACjEZ,EAAeU,EAAOC,GAG1B,IAAMJ,EAASN,EAAEO,MAAM,KACjBC,EAASP,EAAEM,MAAM,KACjBE,EAAQH,EAAOA,EAAOK,OAAS,GAC/BD,EAAQF,EAAOA,EAAOG,OAAS,GACrC,OAAOF,IAAUC,EACbX,EAAeO,EAAO,GAAIE,EAAO,IACjCT,EAAeU,EAAOC,IAIjBE,EAAkB,SAACZ,EAAoBC,GAClD,OAAO,IAAIY,KAAKZ,EAAEa,YAAYC,UAAY,IAAIF,KAAKb,EAAEc,YAAYC,WAGtDC,EAAyB,SACpCC,EACAC,GAEAD,EAAKE,KAAKjB,GAEV,IAAMkB,EAA8B,GAC9BC,EAA+B,GAUrC,OATAJ,EAAKK,SAAQ,SAACC,GACRL,EAAWM,IAAID,EAAIE,SAErBL,EAAQM,KAAKH,GAGbF,EAASK,KAAKH,MAGZ,GAAN,OAAWH,EAAYC,IAGnBM,EAAuB,SAAI3B,EAAMC,EAAM2B,GAC3C,OAAI3B,EAAE2B,GAAW5B,EAAE4B,IACT,EAEN3B,EAAE2B,GAAW5B,EAAE4B,GACV,EAEF,GAGIC,EAAgB,SAC3BC,EACAF,GAOA,MAAgB,iBAAZA,EACe,SAAVE,EACH,SAAC9B,EAAGC,GAAJ,OAAWC,EAAoBF,EAAGC,IAClC,SAACD,EAAGC,GAAJ,OAAUC,EAAoBF,EAAGC,IAEpB,SAAV6B,EACH,SAAC9B,EAAGC,GAAJ,OAAU0B,EAAqB3B,EAAGC,EAAG2B,IACrC,SAAC5B,EAAGC,GAAJ,OAAW0B,EAAqB3B,EAAGC,EAAG2B,KAKjCG,EAAa,SACxBC,EACAC,GAEA,IAAMC,EAAiBF,EAAMG,KAAI,SAACC,EAAIC,GAAL,MAAe,CAACD,EAAIC,MAQrD,OAPAH,EAAef,MAAK,SAACnB,EAAGC,GACtB,IAAM6B,EAAQG,EAAWjC,EAAE,GAAIC,EAAE,IACjC,OAAc,IAAV6B,EACKA,EAEF9B,EAAE,GAAKC,EAAE,MAEXiC,EAAeC,KAAI,SAACC,GAAD,OAAQA,EAAG,OAGhC,SAASE,EAAUD,GACxB,MAAO,CACLE,GAAG,OAAD,OAASF,GACX,gBAAgB,YAAhB,OAA6BA,IAI1B,SAASG,EAAaC,EAAoBC,GAC/C,OAAOC,WAASC,WAAWH,EAAYI,KAAqBC,eAC1DH,WAASI,cAAgBL,GAItB,IAAMM,EAAmB,SAACC,GAC/B,SACEA,EAASC,aACTP,WAASC,WAAWK,EAASC,YAAaL,KACxCF,WAASQ,U,wOChKTC,EAAStE,IAAUH,eAIZ0E,EAAO,iDAAG,uHAEDC,IAAM9B,IAAN,UACb4B,EAAOG,OADM,2BACmBH,EAAOjE,YAHzB,cAEbqE,EAFa,yBAKZA,EAAIC,KAAKA,MALG,uCAOnBC,QAAQ7D,MAAR,MAPmB,kBAQZ,MARY,yDAAH,qDAYP8D,EAAqB,iDAChC,uHAEsBL,IAAM9B,IAAN,UACb4B,EAAOG,OADM,0CACkCH,EAAOjE,YAH/D,cAEUqE,EAFV,yBAKWA,EAAIC,KAAKA,MALpB,uCAOIC,QAAQ7D,MAAR,MAPJ,kBAQW,MARX,yDADgC,qDAarB+D,EAAW,iDAAG,WAAOX,GAAP,iGAEjBY,EAAOZ,EAFU,SAGjBK,IAAMQ,KAAN,UACDV,EAAOG,OADN,0CAC8CH,EAAOjE,WACzD0E,GALqB,wEASvBH,QAAQ7D,MAAR,MATuB,4EAAH,sDAcXkE,EAAc,iDAAG,WAC5Bd,GAD4B,iGAIpBY,EAAOZ,EAJa,SAKpBK,IAAMU,IAAN,UACDZ,EAAOG,OADN,0CAC8CH,EAAOjE,WACzD0E,GAPwB,wEAW1BH,QAAQ7D,MAAR,MAX0B,4EAAH,sDAgBdoE,EAAc,iDAAG,uHAERX,IAAM9B,IAAN,UACb4B,EAAOG,OADM,0CACkCH,EAAOjE,YAHjC,cAEpBqE,EAFoB,yBAKnBA,EAAIC,KAAKA,MAAQ,IALE,uCAO1BC,QAAQ7D,MAAR,MAP0B,kBAQnB,IARmB,yDAAH,qDAYdqE,EAAoB,iDAAG,uHAEdZ,IAAM9B,IAAN,UACb4B,EAAOG,OADM,0CACkCH,EAAOjE,YAH3B,cAE1BqE,EAF0B,yBAKzBA,EAAIC,KAAKA,MAAQ,IALQ,uCAOhCC,QAAQ7D,MAAR,MAPgC,kBAQzB,IARyB,yDAAH,qDAYpBsE,EAAa,iDAAG,WAAOC,GAAP,wFAC3BV,QAAQW,IAAI,oBADe,SAGnBR,EAAOO,EAHY,SAInBd,IAAMU,IAAN,UACDZ,EAAOG,OADN,0CAC8CH,EAAOjE,WACzD0E,GANuB,wEAUzBH,QAAQ7D,MAAR,MAVyB,4EAAH,sDAiBbyE,EAAkB,iDAAG,uHAEZhB,IAAM9B,IAAN,UACb4B,EAAOG,OADM,uCAC+BH,EAAOjE,YAH1B,cAExBqE,EAFwB,yBAKvBA,EAAIC,KAAKA,MALc,uCAO9BC,QAAQ7D,MAAR,MAP8B,kBAQvB,MARuB,yDAAH,qDAYlB0E,EAAwB,iDAAG,uHAIlBjB,IAAM9B,IAAN,UACb4B,EAAOG,OADM,uCAC+BH,EAAOjE,YALpB,cAI9BqE,EAJ8B,yBAO7BA,EAAIC,KAAKA,MAAQ,IAPY,uCASpCC,QAAQ7D,MAAR,MAToC,kBAU7B,IAV6B,yDAAH,qDAcxB2E,EAAU,iDAAG,WACxBC,EACAC,GAFwB,iGAKhBb,EAAO,CACXc,YAAaF,EACbG,gBAAiBF,GAPG,SAShBpB,IAAMQ,KAAN,UACDV,EAAOG,OADN,uCAC2CH,EAAOjE,WACtD0E,GAXoB,wEAetBH,QAAQ7D,MAAR,MAfsB,4EAAH,wD,OC1FRgF,MAtCf,SAAkBC,GAEhB,MAA8BC,oBAAkB,GAAhD,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA8BF,qBAA9B,mBAAOtG,EAAP,KAAgByG,EAAhB,KAkBA,OAhBAC,qBAAU,WACR9B,IAAU+B,MAAK,SAACC,IAEXA,GACgB,kBAATA,GACLA,EAAgBhF,SAAS,oBAE5BqD,QAAQ7D,MAAM,mBACdoF,GAAW,KAEXC,EAAWG,GACXJ,GAAW,SAGd,IAGD,cAACK,EAAA,EAAD,CAAKC,SAAU,WAAYC,OAAQ,EAAGC,EAAG,EAAzC,SACE,cAACC,EAAA,EAAD,CAAMC,GAAI,CAAEC,OAAQ,iBAApB,SACE,eAACN,EAAA,EAAD,CAAKG,EAAG,EAAGI,UAAU,SAArB,UACE,eAACC,EAAA,EAAD,mCAAkCnH,iBAClC,eAACmH,EAAA,EAAD,2BACSrH,QADT,IACSA,OADT,EACSA,EAASsH,SADlB,UACmC,IACzB,OAAPtH,QAAO,IAAPA,KAASuH,aAAe,aAAe,aAE1C,eAACF,EAAA,EAAD,oCAA4BrH,QAA5B,IAA4BA,OAA5B,EAA4BA,EAASU,aANvC,eAOe6F,EAAU,UAAY,gBChC9BiB,MARf,SAAgBnB,GACd,OACE,cAACQ,EAAA,EAAD,CAAKY,GAAI,EAAT,SACE,cAACJ,EAAA,EAAD,CAAYK,QAAQ,KAApB,uBCLOC,EAAaC,wBAA0B,CAClD9C,OAAQ,GACR+C,UAAW,GACXN,cAAc,EACdO,OAAQ,GACRpH,UAAW,GACX4G,SAAU,GACVS,UAAU,EACVC,UAAW,K,6OCiPEC,OAlOf,SAAgB5B,GACd,IAAQ7D,EAA2C6D,EAA3C7D,KAAM0F,EAAqC7B,EAArC6B,QAASC,EAA4B9B,EAA5B8B,WAAYC,EAAgB/B,EAAhB+B,YAEnC,EAA0C9B,mBACxC,IADF,mBAAO+B,EAAP,KAAsBC,EAAtB,KAGA,EAA8ChC,mBAC5C,IADF,mBAAOiC,EAAP,KAAwBC,EAAxB,KAGA,EAAgClC,mBAAmC,MAAnE,mBAAOmC,EAAP,KAAiBC,EAAjB,KACMC,EAAOC,QAAQH,GACf3E,EAAK6E,EAAO,sBAAmBE,EAErCnC,qBAAU,WAER,IAAMoC,EAA8C,GAC9CC,EAA4C,GAClDvG,EAAKK,SAAQ,SAACC,GACZoF,EAAQrF,SAAQ,SAACmG,GAEfC,EAAaH,EAAkBE,EAAOE,OAAQpG,GAE9CmG,EAAaF,EAAoBC,EAAOE,OAAQpG,SAGpD0F,EAAmBO,GACnBT,EAAiBQ,KAChB,CAACtG,EAAM0F,IAEV,IAAMe,EAAe,SACnBE,EACAC,EACAtG,GAEIqG,EAAUC,GACZD,EAAUC,GAAKtG,EAAIsG,KAAQ,EAE3BD,EAAUC,GAAV,eACGtG,EAAIsG,IAAO,IAKZC,EAAc,SAACC,GACnBZ,EAAYY,EAAMC,gBAsCdC,EAAoB,SAACJ,GAEzB,OADaK,OAAOC,KAAKnB,EAAgBa,IAC5BO,MAAK,SAACC,GAAD,OAAuC,IAA9BrB,EAAgBa,GAAKQ,OAa5CC,EAAe,WACnB,IADyB,EACrBC,EAAsBtH,EADD,cAEJ0F,GAFI,yBAEdc,EAFc,QAGvBc,EAAeA,EAAad,QAAO,SAAClG,GAClC,GAAoB,SAAhBkG,EAAOe,OACUxB,EAAgBS,EAAOE,QAAQpG,EAAIkG,EAAOE,SAE3D,OAAO,EAGX,OAAO,MARX,2BAA+B,IAFN,8BAazBf,EAAW2B,IAGPE,EAAmB,SAAChB,GACxB,IAAIiB,EAAUR,OAAOC,KAAKrB,EAAcW,EAAOE,SAM/C,OALIF,EAAOtG,KACTuH,EAAQvH,KAAKsG,EAAOtG,MAEpBuH,EAAQvH,OAEHuH,GAGT,OACE,eAACpD,EAAA,EAAD,CAAKqD,QAAS,OAAQC,eAAgB,MAAtC,UACG/B,EACC,cAACgC,GAAA,EAAD,CACE,mBAAkBtG,EAClBuG,QAAS,cAACC,GAAA,EAAD,IACT5C,QAAQ,WACR6C,QAASlB,EAJX,qBASA,cAACmB,EAAA,EAAD,CAAYC,eAAa,EAAC,mBAAkB3G,EAAIyG,QAASlB,EAAzD,SACG,cAACiB,GAAA,EAAD,MAGL,cAACI,GAAA,EAAD,CACE5G,GAAIA,EACJ6E,KAAMA,EACNF,SAAUA,EACVkC,QAhGc,WAClBjC,EAAY,OAgGRkC,aAAc,CACZC,SAAU,SACVC,WAAY,QAPhB,SAUE,cAACjE,EAAA,EAAD,CAAKqD,QAAS,OAAQa,SAAU,OAAhC,SACG7C,EAAQxE,KAAI,SAACsF,EAAQgC,GAAT,OACX,eAACnE,EAAA,EAAD,CAAmCG,EAAG,EAAtC,UACE,cAACiE,GAAA,EAAD,UAAYjC,EAAOkC,QACF,SAAhBlC,EAAOe,KACN,cAAClD,EAAA,EAAD,CAAKqD,QAAS,OAAd,SACG7B,EAAcW,EAAOE,SACpB,eAACiC,GAAA,EAAD,WAEE,cAACC,GAAA,EAAD,CACEC,QACE,cAACC,GAAA,EAAD,CACEC,KAAK,QACLC,MAAM,UACNC,QAASjC,EAAkBR,EAAOE,QAClCwC,eACGlC,EAAkBR,EAAOE,UA9E3BE,EA+EmBJ,EAAOE,SA9EtCO,OAAOC,KAAKnB,EAAgBa,IAC3BO,MAAK,SAACC,GAAD,OAAuC,IAA9BrB,EAAgBa,GAAKQ,OA+EzBW,QAAS,kBAxGT,SAACnB,GACzB,IAAIuC,GAAS,EACPC,EAAapC,EAAkBJ,GAQrC,IAAK,IAAIQ,KALP+B,GAFEC,EAOYrD,EAAgBa,GAC9Bb,EAAgBa,GAAKQ,GAAO+B,EAE9BnD,EAAmB,eAAKD,IACxBsB,IACA5E,QAAQW,IAAIwD,EAAK,QAASwC,GAyFaC,CAAkB7C,EAAOE,WAG5CgC,MACE,cAAC7D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,0BAKH9B,EAAiBhB,GAAQtF,KAAI,SAACkG,EAAKoB,GAClC,OACE,cAACnE,EAAA,EAAD,UACE,cAACuE,GAAA,EAAD,CACEC,QACE,cAACC,GAAA,EAAD,CACEC,KAAK,QACLC,MAAM,UACNC,SAC0C,IAAxClD,EAAgBS,EAAOE,QAAQU,GAEjCW,QAAS,kBAlIlB,SAACnB,EAAaQ,GACnCrB,EAAgBa,GAAKQ,IAAQrB,EAAgBa,GAAKQ,GAClDpB,EAAmB,eAAKD,IACxBsB,IAgIgCkC,CAAe/C,EAAOE,OAAQU,MAIpCsB,MACElC,EAAOgD,aACHhD,EAAOgD,aAAapC,GACpBA,KAjBV,UAAaZ,EAAOE,OAApB,YAA8B8B,EAA9B,YAAmCpB,YA2B7C,cAAC/C,EAAA,EAAD,UACE,cAACoF,GAAA,EAAD,CAAWV,KAAK,QAAQxB,KAAMf,EAAOe,WAxD3C,UAAaf,EAAOE,OAApB,YAA8B8B,IAhEd,IAAC5B,a,oBCtEd8C,OA5Bf,SAAyB7F,GACvB,IAQ2B8F,EARnBjD,EAA8D7C,EAA9D6C,OAAQkD,EAAsD/F,EAAtD+F,YAAa/I,EAAyCgD,EAAzChD,MAAOF,EAAkCkD,EAAlClD,QAASkJ,EAAyBhG,EAAzBgG,SAAUC,EAAejG,EAAfiG,WAWvD,OACE,eAACC,GAAA,EAAD,CACEC,OAAQrJ,IAAY+F,EACpBuD,UAAWtJ,IAAY+F,EAAS7F,EAAQ,MACxCkH,SAPuB4B,EAOIjD,EAPc,SAACI,IANpB,SAACA,EAA4B6C,GAErDE,EADclJ,IAAYgJ,GAAsB,QAAV9I,EACrB,OAAS,OAC1BiJ,EAAWH,GAIXO,CAAkBpD,EAAO6C,KAGzB,UAKGC,EACAjJ,IAAY+F,EACX,cAACrC,EAAA,EAAD,CAAK8F,UAAU,OAAOzF,GAAI0F,KAA1B,SACa,SAAVvJ,EAAmB,oBAAsB,qBAE1C,SCkGKwJ,OA9Gf,SAAuBxG,GACrB,IAAQ7D,EAAyB6D,EAAzB7D,KAAMsK,EAAmBzG,EAAnByG,eACd,EAAwCxG,mBAAS9D,GAAjD,mBAAOsH,EAAP,KAAqBiD,EAArB,KACA,EACEzG,mBAAiC,mBADnC,mBAAOnD,EAAP,KAAgBmJ,EAAhB,KAEA,EAA0BhG,mBACZ,oBAAZnD,EAAgC,OAAS,OAD3C,mBAAOE,EAAP,KAAcgJ,EAAd,KAIA3F,qBAAU,WACRqG,EAAgBvK,KACf,CAACA,IAGJ,IAAMwK,EAAqB1J,YACzBwG,EACA1G,YAAcC,EAAOF,IAGvB,OACE,eAAC0D,EAAA,EAAD,WACE,cAACA,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC,GAAD,CACE7E,YAAY,UACZ5F,KAAMA,EACN0F,QAASgF,IAAQC,WAAWC,SAC5BjF,WAAY4E,MAGhB,cAACM,EAAA,EAAD,CAAgBV,UAAWW,IAA3B,SACE,eAACC,EAAA,EAAD,CAAOrG,GAAI,CAAEsG,SAAU,KAAO,aAAW,eAAzC,UACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAWC,MAAM,SAASC,MAAO,IAAjC,SACE,cAAC,GAAD,CACE3E,OAAQ,kBACRkD,YAAa,mBACP/I,QAAOF,UAASkJ,WAAUC,iBAGpC,cAACqB,EAAA,EAAD,UACE,cAAC,GAAD,CACEzE,OAAQ,eACRkD,YAAa,eACP/I,QAAOF,UAASkJ,WAAUC,iBAGpC,cAACqB,EAAA,EAAD,CAAWC,MAAM,SAAjB,SACE,cAAC,GAAD,CACE1E,OAAQ,cACRkD,YAAa,cACP/I,QAAOF,UAASkJ,WAAUC,iBAGpC,cAACqB,EAAA,EAAD,CAAWC,MAAM,SAAjB,SACE,cAAC,GAAD,CACE1E,OAAQ,UACRkD,YAAa,oBACP/I,QAAOF,UAASkJ,WAAUC,sBAKxC,cAACwB,EAAA,EAAD,UACId,EAAmB9K,OAOnB8K,EAAmBtJ,KAAI,SAACZ,EAAKc,GAAN,OACrB,eAAC8J,EAAA,EAAD,CAEExG,GAAI,CAAE,mCAAoC,CAAEC,OAAQ,IAFtD,UAIE,cAACwG,EAAA,EAAD,CAAWC,MAAM,SAAjB,SACE,cAAC/G,EAAA,EAAD,CACEqD,QAAS,OACT6D,UAAW,GACX5D,eAAgB,SAChB6D,aAAc,SAJhB,SAOGlL,EAAImL,iBACH,cAACzD,EAAA,EAAD,CACED,QAAS,kBAAMuC,EAAe,IAC9BrC,eAAe,EAFjB,SAIE,cAACyD,EAAA,EAAD,CACEC,aAAcrL,EAAImL,gBAClBzC,MAAM,kBAMhB,cAACmC,EAAA,EAAD,UAAY7K,EAAInB,eAChB,cAACgM,EAAA,EAAD,CAAWC,MAAM,SAAjB,SAA2B9K,EAAIsL,cAC/B,cAACT,EAAA,EAAD,CAAWC,MAAM,SAAjB,SAA2B9K,EAAIuL,YA3BjC,UACUzK,EADV,YACmBd,EAAIE,aARzB,cAAC0K,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAWW,QAAS,EAAGpH,GAAI,CAAEE,UAAW,UAAxC,SACE,cAACC,EAAA,EAAD,wC,8BCpFZkH,GAAyC,CAC7C1N,SAAU,CACR2N,KAAM,cAACC,GAAA,EAAD,CAAajD,MAAM,YACzBkD,KAAM,WACNC,QAAS,6BAEX1N,QAAS,CACPuN,KAAM,cAACI,GAAA,EAAD,CAAMpD,MAAM,YAClBkD,KAAM,UACNC,QAAS,iDAEXxN,SAAU,CACRqN,KAAM,cAACK,GAAA,EAAD,CAAQrD,MAAM,UACpBkD,KAAM,WACNC,QAAS,6BAEXtN,UAAW,CACTmN,KAAM,cAACI,GAAA,EAAD,CAAMpD,MAAM,YAClBkD,KAAM,UACNC,QAAS,kDAsBEG,OAjBf,SAAoBzI,GAClB,IAAQ0I,EAAqB1I,EAArB0I,OAAQC,EAAa3I,EAAb2I,SAEhB,OACE,eAACnI,EAAA,EAAD,CAAKqD,QAAS,OAAQ+E,WAAY,SAAlC,UACE,cAACpI,EAAA,EAAD,CAAKqD,QAAS,OAAQ+E,WAAY,SAAlC,SACE,cAACC,EAAA,EAAD,CAASC,MAAOZ,GAAWQ,GAAQJ,QAAnC,SACGJ,GAAWQ,GAAQP,UAGtBQ,GACA,cAAC3H,EAAA,EAAD,CAAYH,GAAI,CAAEkI,GAAI,GAAtB,SAA4Bb,GAAWQ,GAAQL,WC8GxCW,OAzHf,SAAsBhJ,GACpB,IAAQ7D,EAAoC6D,EAApC7D,KAAM0F,EAA8B7B,EAA9B6B,QAASoH,EAAqBjJ,EAArBiJ,iBACjBtP,EAAUuP,qBAAW5H,GAC3B,EAAwCrB,mBAAS9D,GAAjD,mBAAOsH,EAAP,KAAqBiD,EAArB,KACMyC,EAAe7O,YAAgB8O,eACrC,EAA8BnJ,mBAAgC,cAA9D,mBAAOnD,EAAP,KAAgBmJ,EAAhB,KACA,EAA0BhG,mBACZ,eAAZnD,EAA2B,OAAS,OADtC,mBAAOE,EAAP,KAAcgJ,EAAd,KAIA3F,qBAAU,WAERlE,EAAKK,SAAQ,SAACC,GACZA,EAAI4M,YACkB,cAApB5M,EAAI4M,YAA8B,UAAY5M,EAAI4M,eAEtD3C,EAAgBvK,KACf,CAACA,IAGJ,IAAMwK,EAAqB1J,YACzBwG,EACA1G,YAAcC,EAAOF,IAGvB,OACE,eAAC0D,EAAA,EAAD,WACE,cAACA,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC,GAAD,CACE7E,YAAY,UACZ5F,KAAMA,EACN0F,QAASA,EACTC,WAAY4E,MAGhB,cAACM,EAAA,EAAD,CAAgBV,UAAWW,IAA3B,SACE,eAACC,EAAA,EAAD,CAAOrG,GAAI,CAAEsG,SAAU,KAAO,aAAW,eAAzC,UACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,UACE,cAAC,GAAD,CACEzE,OAAQ,aACRkD,YAAa,cACP/I,QAAOF,UAASkJ,WAAUC,iBAGnCtM,EAAQuH,cACP,cAACoG,EAAA,EAAD,UACE,cAAC,GAAD,CACEzE,OAAQ,eACRkD,YAAa,eACP/I,QAAOF,UAASkJ,WAAUC,iBAItC,cAACqB,EAAA,EAAD,UACE,cAAC,GAAD,CACEzE,OAAQ,gBACRkD,YAAa,UACP/I,QAAOF,UAASkJ,WAAUC,iBAGpC,cAACqB,EAAA,EAAD,UACE,cAAC,GAAD,CACEzE,OAAQ,cACRkD,YAAa,SACP/I,QAAOF,UAASkJ,WAAUC,iBAGpC,cAACqB,EAAA,EAAD,CAAWC,MAAM,SAAjB,yBAGJ,cAACE,EAAA,EAAD,UACId,EAAmB9K,OAOnB8K,EAAmBtJ,KAAI,SAACZ,EAAKc,GAAN,OACrB,eAAC8J,EAAA,EAAD,CAEExG,GAAI,CAAE,mCAAoC,CAAEC,OAAQ,IAFtD,UAIE,cAACwG,EAAA,EAAD,CACEzG,GAAI,CACFyI,WAAW,aAAD,OACRH,EAAa1M,EAAI4M,aADT,gBAFd,SAOG3L,YAAajB,EAAIT,cAEnBrC,EAAQuH,cACP,cAACoG,EAAA,EAAD,CAAWhB,UAAU,KAAKiD,MAAM,MAAhC,SACG9M,EAAInB,eAGT,cAACgM,EAAA,EAAD,UAAY7K,EAAI+M,gBAChB,cAAClC,EAAA,EAAD,UACE,cAAC,GAAD,CAAYoB,OAAQjM,EAAI4M,gBAE1B,cAAC/B,EAAA,EAAD,CAAWC,MAAM,SAAjB,SACE,cAACxD,GAAA,EAAD,CACE1C,QAAQ,YACR6C,QAAS,kBAAM+E,EAAiBxM,EAAIgN,aAFtC,wBAvBJ,UACUlM,EADV,YACmBd,EAAIgN,gBARzB,cAACpC,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAWW,QAAS,EAAGpH,GAAI,CAAEE,UAAW,UAAxC,SACE,cAACC,EAAA,EAAD,wCCiBH0I,OArGf,SAAuB1J,GACrB,IAAQ7D,EAA2B6D,EAA3B7D,KAAM8M,EAAqBjJ,EAArBiJ,iBACd,EAAwChJ,mBAAS9D,GAAjD,mBAAOsH,EAAP,KAAqBiD,EAArB,KACA,EAA8BzG,mBAAiC,cAA/D,mBAAOnD,EAAP,KAAgBmJ,EAAhB,KACA,EAA0BhG,mBACZ,eAAZnD,EAA2B,OAAS,OADtC,mBAAOE,EAAP,KAAcgJ,EAAd,KAIA3F,qBAAU,WACRqG,EAAgBvK,KACf,CAACA,IAGJ,IAAMwK,EAAqB1J,YACzBwG,EACA1G,YAAcC,EAAOF,IAGvB,OACE,eAAC0D,EAAA,EAAD,WACE,cAACA,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC,GAAD,CACE7E,YAAY,UACZ5F,KAAMA,EACN0F,QAASgF,IAAQC,WAAW6C,SAC5B7H,WAAY4E,MAGhB,cAACM,EAAA,EAAD,CAAgBV,UAAWW,IAA3B,SACE,eAACC,EAAA,EAAD,CAAOrG,GAAI,CAAEsG,SAAU,KAAO,aAAW,eAAzC,UACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,UACE,cAAC,GAAD,CACEzE,OAAQ,aACRkD,YAAa,eACP/I,QAAOF,UAASkJ,WAAUC,iBAGpC,cAACqB,EAAA,EAAD,UACE,cAAC,GAAD,CACEzE,OAAQ,eACRkD,YAAa,eACP/I,QAAOF,UAASkJ,WAAUC,iBAGpC,cAACqB,EAAA,EAAD,UACE,cAAC,GAAD,CACEzE,OAAQ,gBACRkD,YAAa,UACP/I,QAAOF,UAASkJ,WAAUC,iBAGpC,cAACqB,EAAA,EAAD,0BACA,cAACA,EAAA,EAAD,CAAWC,MAAM,SAAjB,yBAGJ,cAACE,EAAA,EAAD,UACId,EAAmB9K,OAOnB8K,EAAmBtJ,KAAI,SAACZ,EAAKc,GAAN,OACrB,eAAC8J,EAAA,EAAD,CAEExG,GAAI,CAAE,mCAAoC,CAAEC,OAAQ,IAFtD,UAIE,cAACwG,EAAA,EAAD,UAAY5J,YAAajB,EAAImN,cAC7B,cAACtC,EAAA,EAAD,UAAY7K,EAAInB,eAChB,cAACgM,EAAA,EAAD,UAAY7K,EAAI+M,gBAChB,cAAClC,EAAA,EAAD,CACEzG,GAAI,CACFgJ,SAAU,IACVC,SAAU,SACVC,aAAc,WACdC,WAAY,UALhB,SAQGvN,EAAIqD,kBAEP,cAACwH,EAAA,EAAD,CAAWC,MAAM,SAAjB,SACE,cAACxD,GAAA,EAAD,CACE1C,QAAQ,YACR6C,QAAS,kBAAM+E,EAAiBxM,EAAIgN,aAFtC,wBAlBJ,UACUlM,EADV,YACmBd,EAAIgN,gBARzB,cAACpC,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAWW,QAAS,EAAGpH,GAAI,CAAEE,UAAW,UAAxC,SACE,cAACC,EAAA,EAAD,wC,gFC5EZiJ,GAAiB,CACrBC,MAAO,CACL/E,MAAO,QACPgF,SAAU,QACVC,SAAU,CACRlF,KAAM,QACNC,MAAO,UACPrE,OAAQ,sBAEVuJ,SAAU,CACRnF,KAAM,QACNC,MAAO,UACPrE,OAAQ,QAEVwJ,MAAO,CACLpF,KAAM,QACNC,MAAO,UACPrE,OAAQ,SAGZyJ,MAAO,CACLpF,MAAO,QACPgF,SAAU,OACVC,SAAU,CACRlF,KAAM,OACNC,MAAO,UACPrE,OAAQ,QAEVuJ,SAAU,CACRnF,KAAM,OACNC,MAAO,UACPrE,OAAQ,QAEVwJ,MAAO,CACLpF,KAAM,OACNC,MAAO,UACPrE,OAAQ,SAGZ0J,SAAU,CACRC,MAAO,CACLtF,MAAO,OACPiF,SAAU,CACRjF,MAAO,QAETkF,SAAU,CACRlF,MAAO,QAETmF,MAAO,CACLnF,MAAO,SAGXuF,KAAM,CACJvF,MAAO,OACPiF,SAAU,CACRjF,MAAO,QAETkF,SAAU,CACRlF,MAAO,QAETmF,MAAO,CACLnF,MAAO,WAmEAwF,OA5Df,SAAsB3K,GACpB,IAAQ4K,EAA0B5K,EAA1B4K,MAAOJ,EAAmBxK,EAAnBwK,SAAUtF,EAASlF,EAATkF,KAInB2F,EAFa3B,qBAAW5H,GAENI,SAAW,OAAS,QAEtCoJ,EAAmB,UAAT5F,GAAoB0F,EAAQ,EAItCG,EAAsB,SAC1BC,GAEA,MAAO,CACLC,OAAQhB,GAAe/E,GAAM8F,GAAc9F,KAC3CsC,MAAOyC,GAAe/E,GAAM8F,GAAc9F,KAC1CgG,aAAc,GACdpK,OAAQmJ,GAAe/E,GAAM8F,GAAclK,OAC3CD,GAAI,CACFsK,gBAAiBX,EACbP,GAAeO,SAASK,GAAMG,GAAc7F,MAC5C8E,GAAe/E,GAAM8F,GAAc7F,MACvCgF,SAAUF,GAAe/E,GAAMiF,SAC/BhF,MAAOqF,EACHP,GAAeO,SAASK,GAAM1F,MAC9B8E,GAAe/E,GAAMC,OAE3BtB,QAAS,OACTC,eAAgB,SAChB8E,WAAY,WAIhB,OACE,eAACpI,EAAA,EAAD,CAAKC,SAAU,WAAf,UACE,cAACD,EAAA,EAAD,2BACMuK,EAAoB,aAD1B,IAEEtK,SAAUqK,EAAU,WAAa,UACjCM,KAAMN,EAAU,EAAI,EACpBhK,OAAQmJ,GAAe/E,GAAMkF,SAAStJ,OAJxC,SAME,cAACN,EAAA,EAAD,2BAASuK,EAAoB,aAA7B,aACE,cAACvK,EAAA,EAAD,2BAASuK,EAAoB,UAA7B,aAAwCH,WAG3CE,GACC,cAACtK,EAAA,EAAD,2BACMuK,EAAoB,aAD1B,IAEEjK,OAAQmJ,GAAe/E,GAAMkF,SAAStJ,OAFxC,SAIE,cAACN,EAAA,EAAD,2BAASuK,EAAoB,aAA7B,aACE,cAACvK,EAAA,EAAD,eAASuK,EAAoB,qBC8J1BM,OA7Pf,SAAsBrL,GACpB,IAAQsL,EAA8CtL,EAA9CsL,YAAaC,EAAiCvL,EAAjCuL,WAAYjJ,EAAqBtC,EAArBsC,KAAMkJ,EAAexL,EAAfwL,WACjC7R,EAAUuP,qBAAW5H,GAE3B,EAAwCrB,qBAAxC,mBAAOwL,EAAP,KAAqBC,EAArB,KACA,EAA8BzL,qBAA9B,mBAAO0L,EAAP,KAAgBC,EAAhB,KACA,EAAgC3L,oBAAkB,GAAlD,mBAAO4L,EAAP,KAAiBC,EAAjB,KA8CA,OA5CAzL,qBAAU,WACJiC,IACFoJ,OAAgBlJ,GAChBoJ,OAAWpJ,MAEZ,CAACF,IAEJjC,qBAAU,WACR,OAAImL,QAAJ,IAAIA,KAAYnC,aACdyC,GACGnS,EAAQuH,eACN,CAAC,UAAW,aAAa3F,SAAzB,OAAkCiQ,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAYnC,gBAGpD,CAAC1P,EAAS6R,IA+BX,cAACO,GAAA,EAAD,CAAQzJ,KAAMA,EAAMgC,QAASgH,EAA7B,SACGE,GACC,cAAChL,EAAA,EAAD,CAAKG,EAAG,EAAR,SACE,uBAAMqL,SA/BG,SAACC,GAEhB,GADAA,EAAEC,iBACEV,GAAcC,EAAc,CAC9B,IAAMU,EAAgC,CACpC1C,WAAY+B,EAAW/B,WACvBJ,YAAaoC,GAEM,aAAjBA,IACFU,EAAWC,mBAAqBT,GAElCJ,EAAWY,KAqBP,UACE,cAACE,GAAA,EAAD,6BACA,eAACC,GAAA,EAAD,WACE,cAAC9L,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC2F,GAAA,EAAD,0DAMF,eAAC/L,EAAA,EAAD,CAAKqD,QAAS,OAAQzC,GAAI,EAAGwF,GAAI,EAAGgC,WAAY,SAAhD,UACE,cAACpI,EAAA,EAAD,CAAKgM,GAAI,EAAT,SACE,cAAC5H,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,4BAGJ,cAACzE,EAAA,EAAD,UAAawK,EAAWlQ,kBAG1B,eAACkF,EAAA,EAAD,CAAKqD,QAAS,OAAQzC,GAAI,EAAGwF,GAAI,EAAGgC,WAAY,SAAhD,UACE,cAACpI,EAAA,EAAD,CAAKgM,GAAI,EAAT,SACE,cAAC5H,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,uBAGJ,cAACzE,EAAA,EAAD,UAAatD,YAAa8N,EAAW5B,iBAGvC,eAACpJ,EAAA,EAAD,CAAKqD,QAAS,OAAQzC,GAAI,EAAGwF,GAAI,EAAGgC,WAAY,SAAhD,UACE,cAACpI,EAAA,EAAD,CAAKgM,GAAI,EAAT,SACE,cAAC5H,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,uBAGJ,cAACzE,EAAA,EAAD,UAAawK,EAAWhC,gBACxB,cAAChJ,EAAA,EAAD,CAAKuI,GAAI,EAAT,SACE,cAAC,GAAD,CAAc7D,KAAK,QAAQ0F,MAAOY,EAAWiB,kBAIjD,eAACjM,EAAA,EAAD,CAAKqD,QAAS,OAAQ6I,cAAe,SAAUtL,GAAI,EAAGwF,GAAI,EAA1D,UACE,cAACpG,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAChC,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,wCAKJ,cAACjF,EAAA,EAAD,CAAKmM,GAAI,EAAT,SACE,cAAC/G,GAAA,EAAD,CACEgH,WAAS,EACT,aAAW,kDACXC,MAAOrB,EAAW1L,iBAAmB,GACrCgN,WAAS,EACTC,QAAS,EACTC,QAAS,EACTC,WAAY,CACVC,UAAU,UAMjBrB,EACC,eAACrL,EAAA,EAAD,WAEE,eAACA,EAAA,EAAD,CAAKqD,QAAS,OAAQzC,GAAI,EAAGwF,GAAI,EAAGgC,WAAY,SAAhD,UACE,cAACpI,EAAA,EAAD,CAAKgM,GAAI,EAAT,SACE,cAAC5H,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,oCAKJ,cAAC,GAAD,CAAYiD,OAAQ8C,EAAWnC,iBAGL,cAA3BmC,EAAWnC,aACV,eAAC7I,EAAA,EAAD,CAAKqD,QAAS,OAAQzC,GAAI,EAAGwF,GAAI,EAAGgC,WAAY,SAAhD,UACE,cAACpI,EAAA,EAAD,CAAKgM,GAAI,EAAT,SACE,cAAC5H,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,8BAKJ,cAACzE,EAAA,EAAD,UACGtD,YAAa8N,EAAW2B,wBAIH,aAA3B3B,EAAWnC,aACV,eAAC7I,EAAA,EAAD,CACEqD,QAAS,OACT6I,cAAe,SACftL,GAAI,EACJwF,GAAI,EAJN,UAOE,cAACpG,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAChC,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,qCAKJ,cAACjF,EAAA,EAAD,CAAKmM,GAAI,EAAT,SACE,cAAC/G,GAAA,EAAD,CACEgH,WAAS,EACT,aAAW,kDACXC,MAAOrB,EAAWY,oBAAsB,GACxCU,WAAS,EACTC,QAAS,EACTC,QAAS,EACTC,WAAY,CACVC,UAAU,aAQtB,eAAC1M,EAAA,EAAD,WACE,eAAC4M,GAAA,EAAD,WACE,cAACxI,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,kCAIF,cAACjF,EAAA,EAAD,CAAKmM,GAAI,EAAT,SACE,eAACU,GAAA,EAAD,CACE5P,GAAG,oBACH6P,KAAK,oBACL,kBAAgB,oBAChBC,SAxJK,SAACtB,GAC1B,IAAMuB,EAAYvB,EAAEwB,OAAOZ,MACT,aAAdW,GACF5B,EAAW,IAEbF,EAAgB8B,IA+IE,UAME,cAACzI,GAAA,EAAD,CACE8H,MAAM,WACN7H,QAAS,cAAC0I,GAAA,EAAD,CAAOC,UAAQ,IACxB9I,MAAM,WAER,cAACE,GAAA,EAAD,CACE8H,MAAM,WACN7H,QAAS,cAAC0I,GAAA,EAAD,CAAOC,UAAQ,IACxB9I,MAAM,mBAKI,aAAjB4G,GACC,eAACjL,EAAA,EAAD,CACEqD,QAAS,OACT6I,cAAe,SACftL,GAAI,EACJwF,GAAI,EAJN,UAME,cAACpG,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAChC,GAAA,EAAD,UACE,cAAC5D,EAAA,EAAD,CAAYyE,WAAY,OAAxB,qCAKJ,cAACjF,EAAA,EAAD,CAAKmM,GAAI,EAAT,SACE,cAAC/G,GAAA,EAAD,CACEgH,WAAS,EACTe,UAAQ,EACR,aAAW,wDACXb,WAAS,EACT3Q,KAAM,EACN0Q,MAAOlB,EACP4B,SArLI,SAACtB,GAC3B,IAAM2B,EAAa3B,EAAEwB,OAAOZ,MAC5BjB,EAAWgC,iBA2LH,eAACC,GAAA,EAAD,WACE,cAAC9J,GAAA,EAAD,CAAQG,QAASoH,EAAajK,QAAQ,WAAtC,SACGwK,EAAW,QAAU,YAEtBA,GACA,cAAC9H,GAAA,EAAD,CAAQ1C,QAAQ,YAAYqC,KAAK,SAAjC,6B,oECuIDoK,OAvXf,SAAwB9N,GACtB,IAAQsL,EAA4CtL,EAA5CsL,YAAaC,EAA+BvL,EAA/BuL,WAAYjJ,EAAmBtC,EAAnBsC,KAAMnE,EAAa6B,EAAb7B,SAGvC,EAOI4P,aAAwB,CAC1BC,cAAe,CACbC,WAAY,CACV,CACEzE,cAAe,eACfiD,WAAY,EACZyB,SAAU,MACVC,WAAY,GAEd,CACE3E,cAAe,kBACfiD,WAAY,EACZyB,SAAU,MACVC,WAAY,IAGhBC,oBAAoB,KAtBtBpJ,EADF,EACEA,QACAqJ,EAFF,EAEEA,SACAC,EAHF,EAGEA,aACAC,EAJF,EAIEA,MACAC,EALF,EAKEA,SACaC,EANf,EAMEC,UAAaD,OAoBf,EAAiDE,aAAc,CAC7D3J,UACAsI,KAAM,eAFAsB,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,OAAQC,EAAxB,EAAwBA,KAAMC,EAA9B,EAA8BA,OAAQC,EAAtC,EAAsCA,OAKhCC,EAAOV,EAAM,sBAAsB,GAEnCW,EAAaC,uBACjB,SAAChR,GACC,IAAMiR,EAAgBvR,YAASC,WAC7BK,EAASC,YACTL,KACAsR,YACFb,EAAS,mBAAoBrQ,EAASmR,kBACtCd,EAAS,iBAAkBrQ,EAASoR,gBACpCf,EAAS,qBAAsBrQ,EAASiQ,oBACxCI,EAAS,cAAeY,GACxBZ,EAAS,aAAcrQ,EAAS8P,cAElC,CAACO,IAoEH,OAjEAnO,qBAAU,WACJlC,GAAYmE,GACd4M,EAAW/Q,KAEZ,CAACA,EAAUmE,EAAM4M,IA8DlB,cAACnD,GAAA,EAAD,CAAQzJ,KAAMA,EAAMgC,QAASgH,EAA7B,SACE,cAAC9K,EAAA,EAAD,CAAKG,EAAG,EAAR,SACE,uBAAMqL,SAAUsC,GA3BL,SAAC3P,GAEhB,IAAM6Q,EAAmC,CACvCF,iBAAgB,OAAEnR,QAAF,IAAEA,OAAF,EAAEA,EAAUmR,iBAC5BC,eACiC,kBAAxB5Q,EAAK4Q,eACR5Q,EAAK4Q,eACLE,SAAS9Q,EAAK4Q,gBACpBnR,YAAaO,EAAKP,YAClBgQ,mBAAoBzP,EAAKyP,mBACzBH,WAAYtP,EAAKsP,YAGnBuB,EAAiBvB,WAAWzR,SAAQ,SAACkT,EAAU/K,GAC7C+K,EAASvB,WAAaxJ,EAClB+K,EAAS7P,cAAgB6P,EAASxB,SACpCwB,EAASxB,SAAW,SACVwB,EAAS7P,aAAgB6P,EAASxB,WAC5CwB,EAASxB,SAAW,UAGxB3C,EAAWiE,MAMP,UACE,cAACnD,GAAA,EAAD,kCACA,eAACC,GAAA,EAAD,WACGnO,GACC,cAACqC,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC2F,GAAA,EAAD,oEAMJ,eAAC/L,EAAA,EAAD,CAAKqD,QAAS,OAAQzC,GAAI,EAAGwF,GAAI,EAAjC,UACE,cAACpG,EAAA,EAAD,CAAK2G,SAAU,IAAKK,MAAO,IAAKgF,GAAI,EAAGpL,GAAI,EAA3C,SACE,cAACuO,GAAA,EAAD,CAAYC,QAAQ,cAAc/O,GAAI,CAAEmJ,WAAY,UAApD,SACE,cAAChJ,EAAA,EAAD,CAAYyE,WAAY,OAAxB,oEAKJ,cAACjF,EAAA,EAAD,CAAK2G,SAAU,IAAKK,MAAO,IAA3B,SACE,cAAC5B,GAAA,EAAD,yBACEiK,WAAS,EACTC,OAAO,QACP5K,KAAK,QACLzH,GAAG,cACHiG,KAAK,SACL3I,QAAS0T,EAAOc,eAChBQ,gBAAiB,CAAEC,QAAQ,GAC3B/C,WAAY,CACVgD,WAAY,CACVC,MAAO,CAAEnP,UAAW,aAGpBsN,EAAS,iBAAkB,CAC7BV,UAAU,EACVwC,QAAS,WACTC,IAAK,KAhBT,IAkBEC,WACE5B,EAAOc,gBAAkB,0CAMjC,eAAC/O,EAAA,EAAD,CAAKqD,QAAS,OAAQ+C,GAAI,EAA1B,UACE,cAACpG,EAAA,EAAD,CAAK2G,SAAU,IAAKqF,GAAI,EAAGpL,GAAI,EAA/B,SACE,cAACuO,GAAA,EAAD,CAAYC,QAAQ,cAApB,SACE,cAAC5O,EAAA,EAAD,CAAYyE,WAAY,OAAxB,mDAKJ,cAACjF,EAAA,EAAD,UACE,cAACoF,GAAA,EAAD,yBACEkK,OAAO,QACP5K,KAAK,QACLzH,GAAG,cACHiG,KAAK,OACL3I,QAAS0T,EAAOrQ,YAChB2R,gBAAiB,CAAEC,QAAQ,IACvB3B,EAAS,cAAe,CAC1BV,UAAU,KARd,IAUE0C,WAAY5B,EAAOrQ,aAAe,+BAKxC,eAACoC,EAAA,EAAD,CAAKoG,GAAI,EAAT,UACE,eAACpG,EAAA,EAAD,CACEqD,QAAS,OACTC,eAAgB,QAChB8E,WAAY,SAHd,UAKE,cAACpI,EAAA,EAAD,CAAKgM,GAAI,EAAT,SACE,cAACmD,GAAA,EAAD,CAAYC,QAAQ,aAApB,SACE,cAAC5O,EAAA,EAAD,CAAYyE,WAAY,OAAxB,sCAKJ,cAACR,GAAA,EAAD,aACEE,MAAM,UAENC,UAAW6J,EACXgB,WAAY,CACV,aAAc,4CAEZ5B,EAAS,2BAGjB,cAAC7N,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC5F,EAAA,EAAD,CAAYK,QAAQ,QAApB,2DAMJ,eAACb,EAAA,EAAD,CAAKqD,QAAS,OAAQ6I,cAAe,SAArC,UACE,eAAClM,EAAA,EAAD,CAAKqD,QAAS,OAAd,UACE,cAACrD,EAAA,EAAD,CAAK2G,SAAU,IAAKqF,GAAI,EAAxB,SACE,cAACmD,GAAA,EAAD,CAAYC,QAAQ,wBAApB,SACE,cAAC5O,EAAA,EAAD,CAAYyE,WAAY,OAAxB,6BAGJ,eAACjF,EAAA,EAAD,CACE2G,SAAU,IACVK,MAAO,IACP3D,QAAS,OACT+E,WAAY,SAJd,UAME,cAACC,EAAA,EAAD,CACEC,MAAM,sDACNwH,UAAU,MAFZ,SAIE,cAACC,GAAA,EAAD,CAAc1P,GAAI,CAAE2L,GAAI,GAAKrC,SAAS,YAExC,cAACwF,GAAA,EAAD,CAAYC,QAAQ,yBAApB,SACE,cAAC5O,EAAA,EAAD,CAAYyE,WAAY,OAAxB,iCAIN,cAACjF,EAAA,EAAD,CAAKqD,QAAS,OAAQ6I,cAAe,SAArC,SACGkC,EAAOvR,KAAI,SAACqS,EAAU/K,GAAO,IAAD,gBAC3B,OACE,cAACnE,EAAA,EAAD,UAEyB,WAAtBkP,EAASxB,UACR,eAAC1N,EAAA,EAAD,CAAKqD,QAAS,OAAd,UACE,eAACrD,EAAA,EAAD,WACE,cAAC2D,EAAA,EAAD,CACEe,KAAK,QACLsF,SAAgB,IAAN7F,EACVP,eAAa,EACbF,QAAS,kBArMd,SAACS,GACtBmK,EAAKnK,EAAGA,EAAI,GAoM6B6L,CAAe7L,IAJhC,SAME,cAAC8L,GAAA,EAAD,CAAiBtG,SAAS,YAE5B,cAAChG,EAAA,EAAD,CACEe,KAAK,QACLsF,SAAU7F,IAAMiK,EAAO/S,OAAS,EAChCuI,eAAa,EACbF,QAAS,kBAzMZ,SAACS,GACxBmK,EAAKnK,EAAGA,EAAI,GAwM6B+L,CAAiB/L,IAJlC,SAME,cAACgM,GAAA,EAAD,CAAmBxG,SAAS,eAGhC,cAAC3J,EAAA,EAAD,CAAK2G,SAAU,IAAKqF,GAAI,EAAxB,SACE,cAAC5G,GAAA,EAAD,aACEkK,OAAO,QACP5K,KAAK,QACLzH,GAAE,wBAAmBkH,GACrBjB,KAAK,OACLkN,YAAY,yBACZb,gBAAiB,CAAEC,QAAQ,GAC3B/C,WAAY,CACVgD,WAAY,CAAEC,MAAO,CAAE/I,SAAU,OAEnCkJ,YACE,UAAA5B,EAAOR,kBAAP,mBAAoBtJ,UAApB,eAAwB6E,gBACxB,8BAGFzO,QAAQ,UAAC0T,EAAOR,kBAAR,iBAAC,EAAoBtJ,UAArB,QAAC,EAAwB6E,gBAC7B6E,EAAS,cAAD,OAAe1J,EAAf,kBAAkC,CAC5CgJ,UAAU,QAIhB,eAACnN,EAAA,EAAD,CACEqD,QAAS,OACT+E,WAAY,QACZzB,SAAU,IAHZ,UAKE,cAAC3G,EAAA,EAAD,CAAK2G,SAAU,IAAKK,MAAO,IAA3B,SACE,cAAC5B,GAAA,EAAD,aACE4E,SAAUkF,EAASmB,QACnBf,OAAO,QACP5K,KAAK,QACLzH,GAAE,yBAAoBkH,GACtBjB,KAAK,SACLqM,gBAAiB,CAAEC,QAAQ,GAC3B/C,WAAY,CACVgD,WAAY,CACVC,MAAO,CAAEnP,UAAW,YAGxBhG,QAAQ,UAAC0T,EAAOR,kBAAR,iBAAC,EAAoBtJ,UAArB,QAAC,EAAwB8H,YACjC4D,YACE,UAAA5B,EAAOR,kBAAP,mBAAoBtJ,UAApB,eAAwB8H,aACxB,mCAEE4B,EAAS,cAAD,OAAe1J,EAAf,eAA+B,CACzCgJ,UAAU,EACVwC,QAAS,WACTC,IAAK,QAIX,cAAC5P,EAAA,EAAD,CAAKuI,GAAI,EAAG3H,GAAI,EAAhB,SACE,cAACyH,EAAA,EAAD,CACEC,MACE4G,EAASmB,QACL,8DACA,GAJR,SAOE,8BACE,cAAC1M,EAAA,EAAD,CACEqG,SACEkF,EAASmB,SAlQnBjC,EAAOjM,QAAO,SAAC+M,GACrC,MAA6B,WAAtBA,EAASxB,YAEKrS,QAAU,EAkQDqI,QAAS,WA9Pd,IAAC3G,EACxBqR,EADwBrR,EA8PwCoH,GA7PlD9E,aAChB+O,EAAOrR,GAAO2Q,SAAW,SACzBa,EAAOxR,EAAD,YAAC,eACFqR,EAAOrR,IADN,IAEJ2Q,SAAU,aAGZc,EAAOzR,IAiPqB,SAOE,cAACiL,GAAA,EAAD,mBA1FNkH,EAASjS,SAsGzB,cAAC+C,EAAA,EAAD,CAAKY,GAAI,EAAT,SACE,cAAC2C,GAAA,EAAD,CACE1C,QAAQ,YACRyP,UAAW,cAACC,GAAA,EAAD,IACX7M,QA7RU,WACxB2K,EAAO,CAAEV,WAAYS,EAAO/S,UAyRhB,kCAUN,eAACgS,GAAA,EAAD,YACW,OAAR1P,QAAQ,IAARA,OAAA,EAAAA,EAAUmR,mBACT,cAACvL,GAAA,EAAD,CAAQG,QAASoH,EAAajK,QAAQ,WAAtC,oBAIF,cAAC0C,GAAA,EAAD,CAAQ1C,QAAQ,YAAYqC,KAAK,SAAjC,6B,yCCxXGsN,OAhBf,SAAkBhR,GAChB,IAAQiR,EAAqCjR,EAArCiR,SAAUpE,EAA2B7M,EAA3B6M,MAAOtP,EAAoByC,EAApBzC,MAAU2T,EAAnC,aAA6ClR,EAA7C,IAEA,OACE,6CACEmR,KAAK,WACLC,OAAQvE,IAAUtP,EAClBE,GAAE,0BAAqBF,GACvB,uCAA+BA,IAC3B2T,GALN,aAOGrE,IAAUtP,GAAS,cAACiD,EAAA,EAAD,CAAKK,GAAI,CAAEF,EAAG,GAAd,SAAoBsQ,QC+O/BI,OA1Nf,WACE,MAAsCpR,mBAAS,GAA/C,mBAAOqR,EAAP,KAAoB7K,EAApB,KACA,EAAgDxG,oBAAS,GAAzD,mBAAOsR,EAAP,KAAyBC,EAAzB,KACA,EAAoDvR,oBAAS,GAA7D,mBAAOwR,EAAP,KAA2BC,EAA3B,KACA,EAAgCzR,qBAAhC,mBAAO9B,EAAP,KAAiBwT,EAAjB,KACA,EAAsC1R,mBAA6B,IAAnE,mBAAO2R,EAAP,KAAoBC,EAApB,KACA,EAAsC5R,mBAA6B,IAAnE,mBAAO6R,EAAP,KAAoBC,EAApB,KACA,EAAsC9R,mBAA4B,IAAlE,mBAAO+R,EAAP,KAAoBC,EAApB,KACA,EAA8ChS,qBAA9C,mBAAOiS,EAAP,KAAwBC,GAAxB,KAEA9R,qBAAU,WACR+R,OACC,IAEH/R,qBAAU,WAER,IAAMgS,EAAgB,IAAIC,IAC1BR,EAAYtV,SAAQ,SAAC+V,GACfF,EAAc3V,IAAI6V,EAAQ5V,SAC5B0V,EAAcG,IACZD,EAAQ5V,QAER0V,EAAc3V,IAAI6V,EAAQ5V,SAAW,GAGvC0V,EAAcG,IAAID,EAAQ5V,QAAS,MAGnCwB,GACFgB,IAAiBmB,MAAK,SAACmS,GACrB,IAAMC,EAAiBxW,YAAuBuW,EAAUJ,GACxDK,EAAelW,SAAQ,SAACC,GACtBA,EAAImL,gBAAkByK,EAAc3V,IAAID,EAAIE,SAC5CF,EAAIuL,SAAW7J,EAASoR,gBAAkB,IAAM9S,EAAIsL,aAAe,MAErE8J,EAAea,QAGlB,CAACZ,EAAa3T,IAEjBkC,qBAAU,WAES,OAAblC,GACFuT,GAAsB,KAEvB,CAACvT,IAMJ,IAAMiU,GAAoB,iDAAG,kHAEGvT,IAFH,cAErB8T,EAFqB,OAG3BhB,EAAYgB,GAHe,SAMMvT,IANN,QAMrBwT,EANqB,QAQRvW,KAAKP,KAElB+W,EAAyBD,EAAmBjQ,QAAO,SAAClG,GACxD,MAA2B,cAApBA,EAAI4M,eAGb0I,EAAec,GACfZ,EAAeW,GAfY,4CAAH,qDA0DpBE,GAAwB,iDAAG,WAAOC,GAAP,qFAE3BA,EAAYzD,iBAFe,gCAGvBrQ,EAAe8T,GAHQ,6CAKvBjU,EAAYiU,GALW,cAQ/BrB,GAAsB,GARS,UAUC7S,IAVD,QAUzBmU,EAVyB,OAW/BrB,EAAYqB,GAXmB,4CAAH,sDAcxBC,GAAsB,iDAAG,WAAOC,GAAP,kFAE7B1B,GAAoB,GAFS,SAIvBnS,EAAc6T,GAJS,uBAMvBd,KANuB,2CAAH,sDAS5B,OACE,qCACGjU,GACC,eAACqC,EAAA,EAAD,WACE,cAACA,EAAA,EAAD,CAAKqD,QAAS,OAAQC,eAAgB,MAAO0I,GAAI,EAAjD,SACE,eAAChM,EAAA,EAAD,WACE,cAACqI,EAAA,EAAD,CACEC,MACEgJ,EAAYjW,OACR,8CACA,GAJR,SAOE,cAACsI,EAAA,EAAD,CAAYD,QAAS,kBAAMuC,EAAe,IAA1C,SACE,cAACoB,EAAA,EAAD,CAAOC,aAAcgK,EAAYjW,OAAQsJ,MAAM,UAA/C,SACE,cAACgO,EAAA,EAAD,UAIN,cAACtK,EAAA,EAAD,CAASC,MAAM,mCAAf,SACE,cAAC3E,EAAA,EAAD,CAAYD,QA7EO,WAC/BwN,GAAsB,IA4EV,SACE,cAAC0B,EAAA,EAAD,aAKPjV,EAASC,aACR,cAACoC,EAAA,EAAD,CAAKY,GAAI,EAAGwF,GAAI,EAAhB,SACG1I,YAAiBC,GAChB,eAACkV,EAAA,EAAD,CAAOC,SAAS,UAAhB,+BACqB5V,YAAaS,EAASC,gBAG3C,eAACiV,EAAA,EAAD,CAAOC,SAAS,OAAhB,wCAC8B,IAC3B5V,YAAaS,EAASC,kBAK/B,cAACoC,EAAA,EAAD,CAAKK,GAAI,CAAE0S,aAAc,EAAGC,YAAa,WAAzC,SACE,eAACC,EAAA,EAAD,CACE5G,MAAOyE,EACP/D,SAzGY,SAACtK,EAA6ByQ,GACpDjN,EAAeiN,IAyGL,aAAW,qBAHb,UAKE,cAACC,EAAA,EAAD,aAAK9O,MAAM,YAAerH,YAAU,KACpC,cAACmW,EAAA,EAAD,aAAK9O,MAAM,YAAerH,YAAU,KACpC,cAACmW,EAAA,EAAD,aAAK9O,MAAM,WAAcrH,YAAU,UAGvC,cAAC,GAAD,CAAUqP,MAAOyE,EAAa/T,MAAO,EAArC,SACE,cAAC,GAAD,CAAepB,KAAMyV,EAAanL,eAAgBA,MAEpD,cAAC,GAAD,CAAUoG,MAAOyE,EAAa/T,MAAO,EAArC,SACE,cAAC,GAAD,CACEpB,KAAM2V,EACN7I,iBA9G+B,SAAC2K,GAC1CzB,GACEL,EAAYxO,MAAK,SAACiP,GAAD,OAAaA,EAAQ9I,aAAemK,MAEvDpC,GAAoB,QA6Gd,cAAC,GAAD,CAAU3E,MAAOyE,EAAa/T,MAAO,EAArC,SACE,cAAC,GAAD,CACEpB,KAAM6V,EACNnQ,QAASgF,IAAQC,WAAW+M,QAC5B5K,iBA9G8B,SAAC2K,GACzCzB,GACEH,EAAY1O,MAAK,SAACiP,GAAD,OAAaA,EAAQ9I,aAAemK,MAEvDpC,GAAoB,WAgHlB,cAAC,GAAD,CACElG,YA9G4B,SAACrI,EAAgB6Q,GAE7CA,GADsB,CAAC,gBAAiB,iBACZvY,SAASuY,IAGzCpC,GAAsB,IA0GlBnG,WAAYuH,GACZxQ,KAAMmP,EACNtT,SAAUA,GAAY,OAExB,cAAC,GAAD,CACEmN,YA5G0B,SAACrI,EAAgB6Q,GAE3CA,GADsB,CAAC,gBAAiB,iBACZvY,SAASuY,IAGzCtC,GAAoB,IAwGhBjG,WAAY0H,GACZ3Q,KAAMiP,EACN/F,WAAY0G,GAAmB,WCvOxB6B,OAdf,SAAwB/T,GACtB,IAAQgI,EAAYhI,EAAZgI,QACR,OACE,eAACxH,EAAA,EAAD,WACE,cAACA,EAAA,EAAD,CAAKoG,GAAI,EAAG/C,QAAS,OAAQC,eAAgB,SAA7C,SACE,cAAC9C,EAAA,EAAD,CAAYmJ,SAAU,GAAtB,6BAEF,cAAC3J,EAAA,EAAD,CAAKqD,QAAS,OAAQC,eAAgB,SAAtC,SACE,cAAC,GAAD,CAAc8G,MAAO5C,EAAS9C,KAAK,gBCD5B,SAAS8O,GAAmBhU,GACzC,IAAQsL,EAAqCtL,EAArCsL,YAAa2I,EAAwBjU,EAAxBiU,cAAe3R,EAAStC,EAATsC,KACpC,OACE,8BACE,eAACyJ,GAAA,EAAD,CACEzJ,KAAMA,EACNgC,QAASgH,EACT,kBAAgB,4BAChB,mBAAiB,kCAJnB,UAME,cAACe,GAAA,EAAD,CAAa5O,GAAG,4BAAhB,0BACA,cAAC6O,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,CAAmB9O,GAAG,kCAAtB,mEAIF,eAACoQ,GAAA,EAAD,WACE,cAAC9J,GAAA,EAAD,CAAQG,QAASoH,EAAajK,QAAQ,WAAtC,oBAGA,cAAC0C,GAAA,EAAD,CAAQG,QAAS+P,EAAepE,WAAS,EAACxO,QAAS,YAAnD,6BC4KK6S,OA7Lf,SAAqBlU,GACnB,IACEgI,EAMEhI,EANFgI,QACAiG,EAKEjO,EALFiO,WACAkG,EAIEnU,EAJFmU,cACAC,EAGEpU,EAHFoU,aACAC,EAEErU,EAFFqU,YACAlW,EACE6B,EADF7B,SAEImW,EAAmBrG,EAAW5R,MAAK,SAACnB,EAAGC,GAC3C,OAAOD,EAAEiT,WAAahT,EAAEgT,cAE1B,EAAoClO,oBAAS,GAA7C,mBAAOsU,EAAP,KAAmBC,EAAnB,KACA,EAAkCvU,oBAAS,GAA3C,mBAAOwU,EAAP,KAAkBC,EAAlB,KAEA,EAAgDzU,qBAAhD,mBAAO0U,EAAP,KAAyBC,EAAzB,KACA,EAA4C3U,mBAAiB,IAA7D,mBAAOL,EAAP,KAAuBiV,EAAvB,KAiBMC,EAAmB,iDAAG,2FACN,OAAhBH,QAAgB,IAAhBA,MAAkB9U,cAAeD,EADX,uBAExB4U,GAAc,GAFU,SAIlB9U,EAAWiV,EAAiB9U,YAAaD,GAJvB,uBAMlByU,IANkB,OAQxBK,GAAa,GARW,2CAAH,qDAqBzB,OACE,eAAClU,EAAA,EAAD,WACImU,EA8CA,mCACIF,EA8CA,qCACE,cAACjU,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC5F,EAAA,EAAD,CAAYmJ,SAAU,GAAtB,yBAEF,eAAC3J,EAAA,EAAD,CAAKoG,GAAI,EAAT,UACE,eAACpG,EAAA,EAAD,CAAKqD,QAAS,OAAQ+E,WAAY,SAAUhC,GAAI,EAAhD,UACE,cAAC5F,EAAA,EAAD,CAAYH,GAAI,CAAE2L,GAAI,GAAKnL,QAAQ,KAAnC,SACGsT,EAAiBnL,gBAEpB,cAAC,GAAD,CACEoB,MAAO+J,EAAiBlI,WACxBvH,KAAK,aAGT,cAAClE,EAAA,EAAD,CAAYH,GAAI,CAAE+F,GAAI,GAAtB,2EAGA,cAAC5F,EAAA,EAAD,uGAKF,cAACR,EAAA,EAAD,CAAKqD,QAAS,OAAQC,eAAgB,MAAOiR,GAAI,EAAjD,SACE,cAAChR,GAAA,EAAD,CAAQG,QA3HY,WAChC0Q,OAAoBpS,GACpBkS,GAAa,IAyH2CrT,QAAQ,YAApD,uBApEJ,uBAAM2K,SA5EY,SAACC,GAC3BA,EAAEC,iBACFsI,GAAc,IA0EN,UACE,cAAChU,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC5F,EAAA,EAAD,CAAYmJ,SAAU,GAAtB,uBAEF,eAAC3J,EAAA,EAAD,CAAKoG,GAAI,EAAT,UACE,eAACpG,EAAA,EAAD,CAAKqD,QAAS,OAAQ+E,WAAY,SAAUhC,GAAI,EAAhD,UACE,cAAC5F,EAAA,EAAD,CAAYH,GAAI,CAAE2L,GAAI,GAAKnL,QAAQ,KAAnC,SACGsT,EAAiBnL,gBAEpB,cAAC,GAAD,CACEoB,MAAO+J,EAAiBlI,WACxBvH,KAAK,aAGT,cAAClE,EAAA,EAAD,qEAGA,cAACA,EAAA,EAAD,CAAYK,QAAQ,QAAQ2T,UAAW,SAAvC,uCAIF,cAACxU,EAAA,EAAD,CAAKqD,QAAS,OAAd,SACE,cAAC+B,GAAA,EAAD,CACEgH,WAAS,EACTe,UAAQ,EACR,aAAW,4CACXb,WAAS,EACT3Q,KAAM,EACNoR,SAAU,SAACtB,GAAD,OAAO4I,EAAkB5I,EAAEwB,OAAOZ,YAGhD,eAACrM,EAAA,EAAD,CAAKqD,QAAS,OAAQC,eAAgB,MAAOiR,GAAI,EAAjD,UACE,cAAChR,GAAA,EAAD,CACEG,QAlHY,WAC1B0Q,OAAoBpS,GACpB4R,KAiHc/S,QAAQ,WACRR,GAAI,CAAE2L,GAAI,GAHZ,oBAOA,cAACzI,GAAA,EAAD,CAAQ1C,QAAQ,YAAYqC,KAAK,SAAjC,4BAtFR,qCACE,cAAClD,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC5F,EAAA,EAAD,CAAYmJ,SAAU,GAAtB,uBAEF,cAAC3J,EAAA,EAAD,CAAKoG,GAAI,EAAT,SACE,cAAC5F,EAAA,EAAD,mEAIF,cAACR,EAAA,EAAD,CAAKqD,QAAS,OAAQ6I,cAAe,SAArC,SACG4H,EAAiBjX,KAAI,SAACqS,GAAD,OACpB,cAAC3L,GAAA,EAAD,CACEyG,SACExC,EAAU0H,EAASjD,WAAa,GAC/BtO,GAAYD,YAAiBC,GAGhC+G,KAAK,QACLrE,GAAI,CAAE+F,GAAI,GACVvF,QAAQ,YACR6C,QAAS,kBA3DM,SAACwL,GAC5ByE,EAAcnM,EAAU0H,EAASjD,YACjCmI,EAAoBlF,GAyDOuF,CAAqBvF,IATtC,SAWE,eAAClP,EAAA,EAAD,CACEqD,QAAS,OACTC,eAAgB,gBAChB0D,MAAO,OACPoB,WAAY,SAJd,UAME,cAAC5H,EAAA,EAAD,CAAYkU,cAAe,OAA3B,SACGxF,EAASlG,gBAEZ,cAAC,GAAD,CACEoB,MAAO8E,EAASjD,WAChBvH,KAAK,QACLsF,SACExC,EAAU0H,EAASjD,WAAa,GAC/BtO,GAAYD,YAAiBC,SAzBtC,mBAKmBuR,EAAS7P,sBA2GpC,cAACmU,GAAD,CACE1I,YAxIoB,WACxBkJ,GAAc,IAwIVP,cAAea,EACfxS,KAAMiS,QC7JCY,OA/Bf,SAA0BnV,GACxB,IAAQgI,EAAmChI,EAAnCgI,QAAS7J,EAA0B6B,EAA1B7B,SAAUkW,EAAgBrU,EAAhBqU,YAC3B,EAAsCpU,mBAAS+H,GAA/C,mBAAOoN,EAAP,KAAoBC,EAApB,KAUA,OARAhV,qBAAU,WACRgV,EAAerN,KACd,CAACA,IAOF,eAACxH,EAAA,EAAD,CAAKqD,QAAS,OAAQC,eAAgB,eAAgBiR,GAAI,EAA1D,UACE,cAACvU,EAAA,EAAD,CAAKgH,MAAO,MAAZ,SACE,cAAC,GAAD,CAAgBQ,QAASoN,MAE3B,cAAC5U,EAAA,EAAD,CAAKgH,MAAO,MAAZ,SACE,cAAC,GAAD,CACEQ,QAASoN,EACTjB,cAAekB,EACfpH,WAAY9P,EAAS8P,WACrBmG,aAda,WACnBiB,EAAerN,IAcTqM,YAAaA,EACblW,SAAUA,UCoGLmX,OAlHf,WACE,MAAgCrV,qBAAhC,mBAAO9B,EAAP,KAAiBwT,EAAjB,KACA,EAAsC1R,mBAAS,GAA/C,mBAAOqR,EAAP,KAAoB7K,EAApB,KACA,EAAgDxG,oBAAS,GAAzD,mBAAOsR,EAAP,KAAyBC,EAAzB,KACA,EAAsCvR,mBAA4B,IAAlE,mBAAO+R,EAAP,KAAoBC,EAApB,KACA,EAA8ChS,qBAA9C,mBAAOiS,EAAP,KAAwBC,EAAxB,KACA,EAA4ClS,mBAAiB,GAA7D,mBAAOsV,EAAP,KAAuBC,EAAvB,KAEAnV,qBAAU,WACR+R,MACC,IAEH,IAAMA,EAAoB,iDAAG,kHAEG5S,IAFH,cAErBmT,EAFqB,OAG3BhB,EAAYgB,GAHe,SAKMlT,IALN,QAKrBmT,EALqB,QAORvW,KAAKP,KACxBmW,EAAeW,GAEXD,IACI8C,EAAa7C,EAAmB8C,QAAO,SAACxa,EAAGC,GAC/C,MAAsB,aAAlBA,EAAEkO,YACGnO,EAEAA,EAAIC,EAAEsR,aAEd,GACH+I,EAAkB7C,EAAgBpD,eAAiBkG,IAlB1B,4CAAH,qDA0C1B,OACE,qCACGtX,EACC,eAACqC,EAAA,EAAD,WACGrC,EAASC,aACR,cAACoC,EAAA,EAAD,CAAKY,GAAI,EAAGwF,GAAI,EAAhB,SACG1I,YAAiBC,GAChB,eAACkV,EAAA,EAAD,CAAOC,SAAS,UAAhB,+BACqB5V,YAAaS,EAASC,gBAG3C,eAACiV,EAAA,EAAD,CAAOC,SAAS,OAAhB,wCAC8B,IAC3B5V,YAAaS,EAASC,kBAK/B,cAACoC,EAAA,EAAD,CAAKK,GAAI,CAAE0S,aAAc,EAAGC,YAAa,WAAzC,SACE,eAACC,EAAA,EAAD,CACE5G,MAAOyE,EACP/D,SAxCY,SAACtK,EAA6ByQ,GACpDjN,EAAeiN,IAwCL,aAAW,qBAHb,UAKE,cAACC,EAAA,EAAD,aAAK9O,MAAM,WAAcrH,YAAU,KACnC,cAACmW,EAAA,EAAD,aAAK9O,MAAM,WAAcrH,YAAU,UAGvC,cAAC,GAAD,CAAUqP,MAAOyE,EAAa/T,MAAO,EAArC,SACE,cAAC,GAAD,CACEY,SAAUA,EACV6J,QAASuN,EACTlB,YAAajC,MAGjB,cAAC,GAAD,CAAUvF,MAAOyE,EAAa/T,MAAO,EAArC,SACE,cAAC,GAAD,CACEpB,KAAM6V,EACNnQ,QAASgF,IAAQ8O,QAAQ9B,QACzB5K,iBArD8B,SAAC2K,GACzCzB,EACEH,EAAY1O,MAAK,SAACiP,GAAD,OAAaA,EAAQ9I,aAAemK,MAEvDpC,GAAoB,WAsDhB,cAAChR,EAAA,EAAD,CAAKY,GAAI,EAAT,SACE,cAACiS,EAAA,EAAD,CAAOC,SAAS,OAAhB,yEAKJ,cAAC,GAAD,CACEhI,YA1D0B,SAACrI,EAAgB6Q,GAE3CA,GADsB,CAAC,gBAAiB,iBACZvY,SAASuY,IAGzCtC,GAAoB,IAsDhBjG,WAAY,aACZjJ,KAAMiP,EACN/F,WAAY0G,GAAmB,WCtBxB0D,OAxFf,WACE,MAAkC3V,qBAAlC,mBAAO9F,EAAP,KAAkB0b,EAAlB,KAEAxV,qBAAU,WACRzB,QAAQ2B,KAAR,sCAA4C1G,gBAC5C0E,IAAU+B,MAAK,SAACC,GACd,GAAIA,GAAwB,kBAATA,EAAmB,CACpC3B,QAAQ2B,KAAR,mDAEA,IAAMjC,EAAS5E,YAAa6G,GAC5BsV,EAAavX,QAEbM,QAAQ7D,MAAM,6DAGjB,IAKH,IAAM+a,EAAiB1M,cAAW3O,QAAQsb,QAAQpb,KAC5C+G,EAAQ,OAAGvH,QAAH,IAAGA,OAAH,EAAGA,EAAWuH,SACtB/G,GAAQ+G,EAAY,OAAb,OAAwBvH,QAAxB,IAAwBA,OAAxB,EAAwBA,EAAWwH,YAAamU,EAEvDvb,EAAQyb,YAAY,CACxBvb,QAAS,CACPsb,QAAS,CACPpb,QAEFkQ,KAAMnJ,EAAW,OAAS,SAE5BuU,WAAY,CACVC,aAAc,CACZC,eAAgB,CACdC,KAAM,CACJ3Q,WAAY,aAWtB,OACE,eAAC4Q,EAAA,EAAD,CAAe9b,MAAOA,EAAtB,UACE,cAAC+b,EAAA,EAAD,IACA,qBAAKC,UAAU,MAAf,SASGpc,GACC,cAACmH,EAAWkV,SAAZ,CAAqB3J,MAAO1S,EAA5B,SACE,cAACqG,EAAA,EAAD,CAAKqD,QAAS,OAAQ0S,UAAU,aAAhC,SACE,eAAC/V,EAAA,EAAD,CACEgH,MAAO,OACP7G,EAAG,EACHsK,OAAQ,QACRpH,QAAS,OACT6I,cAAe,SALjB,UAOE,cAAC,EAAD,IACA,cAAClM,EAAA,EAAD,UAEGrG,EAAU+G,aACT,cAAC,GAAD,IAEA,cAAC,GAAD,eASb,CAAC,YAAa,eAAe3F,SAAS1B,gBAAqB,cAAC,EAAD,QC1FnD4c,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBrW,MAAK,YAAkD,IAA/CsW,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHDO,IAASC,WACpBC,SAASC,eAAe,SAErBC,OACH,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,OAOJb,M,gCClBA,oJAaa1c,EAA0C,CAKrDM,UAAW,mCAKXsH,UAAW,WAKPtH,EAAYH,cAELF,EAAsD,CACjEud,UAAW,CACT9Y,OAAQ,8CACRpE,UAAWN,EAAmBM,WAAa,IAE7Cmd,YAAa,CACX/Y,OAAQ,8CACRpE,aAEFod,eAAgB,CACdhZ,OAAQ,4BACRpE,cAIS0D,EAAsB,sBAgBtB8I,EAAmB,CAC9BC,WAAY,CACVC,SAAU,CACR,CACElE,OAAQ,eACRgC,MAAO,eACPnB,KAAM,OACNrH,KAAMhB,MAGVsO,SAAU,CACR,CACE9G,OAAQ,gBACRgC,MAAO,eACPnB,KAAM,QAER,CACEb,OAAQ,eACRgC,MAAO,eACPnB,KAAM,OACNrH,KAAMhB,MAGVwY,QAAS,CACP,CACEhR,OAAQ,gBACRgC,MAAO,eACPnB,KAAM,QAQR,CACEb,OAAQ,cACRgC,MAAO,SACPnB,KAAM,OACNiC,aAAc,SAAC+R,GACb,MAAY,cAARA,EACK,UAEAA,EAAIC,OAAO,GAAGC,cAAgBF,EAAIG,MAAM,GAAGC,gBAIxD,CACEjV,OAAQ,eACRgC,MAAO,eACPnB,KAAM,OACNrH,KAAMhB,OAUZsa,QAAS,CACP9B,QAAS,CACP,CACEhR,OAAQ,gBACRgC,MAAO,eACPnB,KAAM,QAER,CACEb,OAAQ,cACRgC,MAAO,SACPnB,KAAM,OACNiC,aAAc,SAAC+R,GACb,MAAY,cAARA,EACK,UAEAA,EAAIC,OAAO,GAAGC,cAAgBF,EAAIG,MAAM,GAAGC,qB","file":"static/js/main.121da4ac.chunk.js","sourcesContent":["import { Theme } from \"@mui/material\";\nimport { DateTime } from \"luxon\";\nimport {\n  APP_INFO_OVERRIDES,\n  DB_DATE_TIME_FORMAT,\n  EnvConfig,\n} from \"./constants\";\nimport {\n  BalancesTableRow,\n  CraEnvironment,\n  DecoratedWindow,\n  GeneralTableRow,\n  HistoryTableRow,\n  LtiAppInfo,\n  RequestStatus,\n  SortOrder,\n  TokensSettings,\n} from \"./types\";\n\nexport const getAppConfig = (appInfo: LtiAppInfo): LtiAppInfo => {\n  const environment = getEnvironment();\n  let overrides = {};\n  // The client-side configuration will override the server properties, if set\n  if (environment === \"pre_build\") {\n    overrides = APP_INFO_OVERRIDES;\n  }\n  const config: LtiAppInfo = {\n    ...appInfo,\n    ...EnvConfig[environment],\n    ...overrides,\n  };\n  return config;\n};\n\nexport const getEnvironment = (): CraEnvironment => {\n  const environment =\n    (process?.env.REACT_APP_ENV as CraEnvironment) || \"production\";\n  return environment;\n};\n\nexport const getSessionId = (): string => {\n  const appConfig = (window as DecoratedWindow).appConfig || null;\n  return appConfig?.sessionId || \"\";\n};\n\nexport const getStatusColors = (theme: Theme) => {\n  const statusColors: Record<RequestStatus, string> = {\n    ACCEPTED: theme.palette.success.main,\n    PENDING: theme.palette.warning.main,\n    REJECTED: theme.palette.error.main,\n    SUBMITTED: theme.palette.warning.main,\n  };\n  return statusColors;\n};\n\n// SORTING\n\nconst compareStrings = (a: string, b: string) => {\n  if (a < b) return -1;\n  if (a > b) return 1;\n  return 0;\n};\n\nexport const compareRowLastNames = (a: GeneralTableRow, b: GeneralTableRow) => {\n  return compareLastNames(a.learner_name, b.learner_name);\n};\n\nexport const compareLastNames = (a: string, b: string) => {\n  if (a.includes(\",\") && b.includes(\",\")) {\n    // Format is \"Last, First\"\n    const splitA = a.split(\" \");\n    const splitB = b.split(\" \");\n    const lastA = splitA[0];\n    const lastB = splitB[0];\n    return lastA === lastB\n      ? compareStrings(splitA[splitA.length - 1], splitB[splitB.length - 1])\n      : compareStrings(lastA, lastB);\n  } else {\n    // Format is \"First Last\"\n    const splitA = a.split(\" \");\n    const splitB = b.split(\" \");\n    const lastA = splitA[splitA.length - 1];\n    const lastB = splitB[splitB.length - 1];\n    return lastA === lastB\n      ? compareStrings(splitA[0], splitB[0])\n      : compareStrings(lastA, lastB);\n  }\n};\n\nexport const compareDateTime = (a: HistoryTableRow, b: HistoryTableRow) => {\n  return new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime();\n};\n\nexport const sortBalancesByPriority = (\n  rows: BalancesTableRow[],\n  requestMap: Map<string, number>\n) => {\n  rows.sort(compareRowLastNames);\n  // Now that rows are sorted, divide them by 'SUBMITTED' status\n  const pending: BalancesTableRow[] = [];\n  const resolved: BalancesTableRow[] = [];\n  rows.forEach((row) => {\n    if (requestMap.get(row.user_id)) {\n      // User has a pending request and should be prioritized\n      pending.push(row);\n    } else {\n      // User does not have a pending request\n      resolved.push(row);\n    }\n  });\n  return [...pending, ...resolved];\n};\n\nconst descendingComparator = <T>(a: T, b: T, orderBy: keyof T) => {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n};\n\nexport const getComparator = <Key extends keyof GeneralTableRow>(\n  order: SortOrder,\n  orderBy: Key\n): ((\n  a: GeneralTableRow,\n  b: GeneralTableRow\n  // a: { [key in Key]: number | string },\n  // b: { [key in Key]: number | string }\n) => number) => {\n  if (orderBy === \"learner_name\") {\n    return order === \"desc\"\n      ? (a, b) => -compareRowLastNames(a, b)\n      : (a, b) => compareRowLastNames(a, b);\n  } else {\n    return order === \"desc\"\n      ? (a, b) => descendingComparator(a, b, orderBy)\n      : (a, b) => -descendingComparator(a, b, orderBy);\n  }\n};\n\n/** Compatible with IE 11, https://mui.com/material-ui/react-table/ */\nexport const stableSort = <T>(\n  array: readonly T[],\n  comparator: (a: T, b: T) => number\n) => {\n  const stabilizedThis = array.map((el, index) => [el, index] as [T, number]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) {\n      return order;\n    }\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n};\n\nexport function a11yProps(index: number) {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`,\n  };\n}\n\nexport function formatDbDate(dateString: string, format?: string) {\n  return DateTime.fromFormat(dateString, DB_DATE_TIME_FORMAT).toLocaleString(\n    DateTime.DATETIME_MED || format\n  );\n}\n\nexport const tokensAreExpired = (settings: TokensSettings) => {\n  return !!(\n    settings.use_by_date &&\n    DateTime.fromFormat(settings.use_by_date, DB_DATE_TIME_FORMAT) <\n      DateTime.now()\n  );\n};\n","import axios from \"axios\";\nimport { EnvConfig } from \"./constants\";\nimport { getEnvironment } from \"./helpers\";\nimport {\n  ApiResponse,\n  BalancesTableRow,\n  GetAllBalancesResponse,\n  GetInfoResponse,\n  GetSettingsResponse,\n  GetSubmittedRequestsResponse,\n  RequestsTableRow,\n  RequestUpdateData,\n  LtiAppInfo,\n  TokensSettings,\n} from \"./types\";\n\nconst config = EnvConfig[getEnvironment()];\n\n/** INSTRUCTOR */\n\nexport const getInfo = async (): Promise<LtiAppInfo | null> => {\n  try {\n    const res = await axios.get<GetInfoResponse>(\n      `${config.apiUrl}/info?PHPSESSID=${config.sessionId}`\n    );\n    return res.data.data;\n  } catch (e) {\n    console.error(e);\n    return null;\n  }\n};\n\nexport const getInstructorSettings =\n  async (): Promise<TokensSettings | null> => {\n    try {\n      const res = await axios.get<GetSettingsResponse>(\n        `${config.apiUrl}/instructor/settings?PHPSESSID=${config.sessionId}`\n      );\n      return res.data.data;\n    } catch (e) {\n      console.error(e);\n      return null;\n    }\n  };\n\nexport const addSettings = async (settings: TokensSettings): Promise<void> => {\n  try {\n    const body = settings;\n    await axios.post<ApiResponse>(\n      `${config.apiUrl}/instructor/settings?PHPSESSID=${config.sessionId}`,\n      body\n    );\n    return;\n  } catch (e) {\n    console.error(e);\n    return;\n  }\n};\n\nexport const updateSettings = async (\n  settings: TokensSettings\n): Promise<void> => {\n  try {\n    const body = settings;\n    await axios.put<ApiResponse>(\n      `${config.apiUrl}/instructor/settings?PHPSESSID=${config.sessionId}`,\n      body\n    );\n    return;\n  } catch (e) {\n    console.error(e);\n    return;\n  }\n};\n\nexport const getAllBalances = async (): Promise<BalancesTableRow[]> => {\n  try {\n    const res = await axios.get<GetAllBalancesResponse>(\n      `${config.apiUrl}/instructor/balances?PHPSESSID=${config.sessionId}`\n    );\n    return res.data.data || [];\n  } catch (e) {\n    console.error(e);\n    return [];\n  }\n};\n\nexport const getSubmittedRequests = async (): Promise<RequestsTableRow[]> => {\n  try {\n    const res = await axios.get<GetSubmittedRequestsResponse>(\n      `${config.apiUrl}/instructor/requests?PHPSESSID=${config.sessionId}`\n    );\n    return res.data.data || [];\n  } catch (e) {\n    console.error(e);\n    return [];\n  }\n};\n\nexport const updateRequest = async (updateData: RequestUpdateData) => {\n  console.log(\"UPDATING request\");\n  try {\n    const body = updateData;\n    await axios.put<ApiResponse>(\n      `${config.apiUrl}/instructor/requests?PHPSESSID=${config.sessionId}`,\n      body\n    );\n    return;\n  } catch (e) {\n    console.error(e);\n    return;\n  }\n};\n\n/** LEARNER */\n\nexport const getLearnerSettings = async (): Promise<TokensSettings | null> => {\n  try {\n    const res = await axios.get<GetSettingsResponse>(\n      `${config.apiUrl}/learner/settings?PHPSESSID=${config.sessionId}`\n    );\n    return res.data.data;\n  } catch (e) {\n    console.error(e);\n    return null;\n  }\n};\n\nexport const getLearnerRequestHistory = async (): Promise<\n  RequestsTableRow[]\n> => {\n  try {\n    const res = await axios.get<GetSubmittedRequestsResponse>(\n      `${config.apiUrl}/learner/requests?PHPSESSID=${config.sessionId}`\n    );\n    return res.data.data || [];\n  } catch (e) {\n    console.error(e);\n    return [];\n  }\n};\n\nexport const addRequest = async (\n  categoryId: string,\n  learnerComment: string\n): Promise<void> => {\n  try {\n    const body = {\n      category_id: categoryId,\n      learner_comment: learnerComment,\n    };\n    await axios.post<ApiResponse>(\n      `${config.apiUrl}/learner/requests?PHPSESSID=${config.sessionId}`,\n      body\n    );\n    return;\n  } catch (e) {\n    console.error(e);\n    return;\n  }\n};\n","import { Box, Card, Typography } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport { getInfo } from \"../utils/api-connector\";\nimport { getEnvironment } from \"../utils/helpers\";\nimport { LtiAppInfo } from \"../utils/types\";\n\ninterface DevPanelProps {}\n\n/**\n * Show development information during pre-build.\n * Dev panel does not rely on appInfo context.\n * This is because the dev panel should show whether\n * or not the appInfo was successfully retrieved.\n */\nfunction DevPanel(props: DevPanelProps) {\n  // const [info, setInfo] = useState<any>(null);\n  const [expired, setExpired] = useState<boolean>(false);\n  const [appInfo, setAppInfo] = useState<LtiAppInfo>();\n\n  useEffect(() => {\n    getInfo().then((info) => {\n      if (\n        !info ||\n        (typeof info === \"string\" &&\n          (info as string).includes(\"Session expired\"))\n      ) {\n        console.error(\"SESSION EXPIRED\");\n        setExpired(true);\n      } else {\n        setAppInfo(info);\n        setExpired(false);\n      }\n    });\n  }, []);\n\n  return (\n    <Box position={\"absolute\"} bottom={0} p={2}>\n      <Card sx={{ border: \"2px solid red\" }}>\n        <Box p={2} textAlign=\"center\">\n          <Typography>React App status is: {getEnvironment()}</Typography>\n          <Typography>\n            Name: {appInfo?.username}, Role:{\" \"}\n            {appInfo?.isInstructor ? \"Instructor\" : \"Learner\"}\n          </Typography>\n          <Typography>Session ID is: {appInfo?.sessionId}</Typography>\n          Session is: {expired ? \"EXPIRED\" : \"VALID\"}\n        </Box>\n      </Card>\n    </Box>\n  );\n}\n\nexport default DevPanel;\n","import { Box, Typography } from \"@mui/material\";\n\ninterface HeaderProps {}\n\n/** Show basic header info */\nfunction Header(props: HeaderProps) {\n  return (\n    <Box mt={6}>\n      <Typography variant=\"h3\">Tokens</Typography>\n    </Box>\n  );\n}\n\nexport default Header;\n","import { createContext } from \"react\";\nimport { LtiAppInfo } from \"./types\";\n\nexport const AppContext = createContext<LtiAppInfo>({\n  apiUrl: \"\",\n  contextId: \"\",\n  isInstructor: false,\n  linkId: \"\",\n  sessionId: \"\",\n  username: \"\",\n  darkMode: false,\n  baseColor: \"\",\n});\n","import { FilterList } from \"@mui/icons-material\";\nimport {\n  Box,\n  Button,\n  Checkbox,\n  FormControlLabel,\n  FormGroup,\n  FormLabel,\n  IconButton,\n  Popover,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { MouseEvent, useEffect, useState } from \"react\";\n\ninterface FilterProps {\n  rows: any[];\n  filters: any[];\n  filterRows: (rows: any[]) => void;\n  buttonLabel?: string;\n}\n\ntype FilterEnumerableReference = Record<string, Record<string, boolean>>;\ntype FilterActiveReference = Record<string, Record<string, boolean>>;\n\n/** Filters data */\nfunction Filter(props: FilterProps) {\n  const { rows, filters, filterRows, buttonLabel } = props;\n  //   const [filteredRows, setFilteredRows] = useState(rows);\n  const [enumReference, setEnumReference] = useState<FilterEnumerableReference>(\n    {}\n  );\n  const [activeReference, setActiveReference] = useState<FilterActiveReference>(\n    {}\n  );\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n  const open = Boolean(anchorEl);\n  const id = open ? \"filter-popover\" : undefined;\n\n  useEffect(() => {\n    // Assemble data for the filter capability\n    const newEnumReference: FilterEnumerableReference = {};\n    const newActiveReference: FilterActiveReference = {};\n    rows.forEach((row) => {\n      filters.forEach((filter) => {\n        // Add each distinct column/row value to the map\n        addReference(newEnumReference, filter.column, row);\n        // Set the active state for the rows that are passed in\n        addReference(newActiveReference, filter.column, row);\n      });\n    });\n    setActiveReference(newActiveReference);\n    setEnumReference(newEnumReference);\n  }, [rows, filters]);\n\n  const addReference = (\n    reference: FilterEnumerableReference | FilterActiveReference,\n    col: any,\n    row: any[]\n  ) => {\n    if (reference[col]) {\n      reference[col][row[col]] = true;\n    } else {\n      reference[col] = {\n        [row[col]]: true,\n      };\n    }\n  };\n\n  const handleClick = (event: MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  //   const handleFilterTextChange = (\n  //     e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,\n  //     col: string\n  //   ) => {\n  //     console.log(e.target.value);\n  //   };\n\n  const toggleCheckbox = (col: string, key: string) => {\n    activeReference[col][key] = !activeReference[col][key];\n    setActiveReference({ ...activeReference });\n    applyFilters();\n  };\n\n  const toggleAllCheckbox = (col: string) => {\n    let toggle = true;\n    const allChecked = allOptionsChecked(col);\n    if (allChecked) {\n      // Deselect all\n      toggle = false;\n    } else {\n      // Select all\n      toggle = true;\n    }\n    for (let key in activeReference[col]) {\n      activeReference[col][key] = toggle;\n    }\n    setActiveReference({ ...activeReference });\n    applyFilters();\n    console.log(col, \" all \", allChecked);\n  };\n\n  const allOptionsChecked = (col: string) => {\n    const keys = Object.keys(activeReference[col]);\n    return !keys.find((key) => activeReference[col][key] === false);\n  };\n\n  const anyOptionsChecked = (col: string) => {\n    const keys = Object.keys(activeReference[col]);\n    return !!keys.find((key) => activeReference[col][key] === true);\n  };\n\n  //   const handleClickApply = () => {\n  //     handleClose();\n  //     applyFilters();\n  //   };\n\n  const applyFilters = () => {\n    let filteredRows: any[] = rows;\n    for (const filter of filters) {\n      filteredRows = filteredRows.filter((row) => {\n        if (filter.type === \"enum\") {\n          const filterOut = !activeReference[filter.column][row[filter.column]];\n          if (filterOut) {\n            return false;\n          }\n        }\n        return true;\n      });\n    }\n    filterRows(filteredRows);\n  };\n\n  const getFilterOptions = (filter: any) => {\n    let options = Object.keys(enumReference[filter.column]);\n    if (filter.sort) {\n      options.sort(filter.sort);\n    } else {\n      options.sort();\n    }\n    return options;\n  };\n\n  return (\n    <Box display={\"flex\"} justifyContent={\"end\"}>\n      {buttonLabel ? (\n        <Button\n          aria-describedby={id}\n          endIcon={<FilterList />}\n          variant=\"outlined\"\n          onClick={handleClick}\n        >\n          Filters\n        </Button>\n      ) : (\n        <IconButton disableRipple aria-describedby={id} onClick={handleClick}>\n          {<FilterList />}\n        </IconButton>\n      )}\n      <Popover\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n      >\n        <Box display={\"flex\"} flexWrap={\"wrap\"}>\n          {filters.map((filter, i) => (\n            <Box key={`${filter.column}-${i}`} p={2}>\n              <FormLabel>{filter.label}</FormLabel>\n              {filter.type === \"enum\" ? (\n                <Box display={\"flex\"}>\n                  {enumReference[filter.column] && (\n                    <FormGroup>\n                      {/* All or none option */}\n                      <FormControlLabel\n                        control={\n                          <Checkbox\n                            size=\"small\"\n                            color=\"default\"\n                            checked={allOptionsChecked(filter.column)}\n                            indeterminate={\n                              !allOptionsChecked(filter.column) &&\n                              anyOptionsChecked(filter.column)\n                            }\n                            onClick={() => toggleAllCheckbox(filter.column)}\n                          />\n                        }\n                        label={\n                          <Typography fontWeight={\"bold\"}>\n                            Select all\n                          </Typography>\n                        }\n                      />\n                      {getFilterOptions(filter).map((key, i) => {\n                        return (\n                          <Box key={`${filter.column}-${i}-${key}`}>\n                            <FormControlLabel\n                              control={\n                                <Checkbox\n                                  size=\"small\"\n                                  color=\"default\"\n                                  checked={\n                                    activeReference[filter.column][key] === true\n                                  }\n                                  onClick={() =>\n                                    toggleCheckbox(filter.column, key)\n                                  }\n                                />\n                              }\n                              label={\n                                filter.valueMapping\n                                  ? filter.valueMapping(key)\n                                  : key\n                              }\n                            />\n                          </Box>\n                        );\n                      })}\n                    </FormGroup>\n                  )}\n                </Box>\n              ) : (\n                <Box>\n                  <TextField size=\"small\" type={filter.type} />\n                </Box>\n              )}\n            </Box>\n          ))}\n        </Box>\n        {/* <Box display={\"flex\"} justifyContent={\"end\"} pr={1} pb={1}>\n          <Button sx={{ mr: 1 }} variant=\"outlined\">\n            Cancel\n          </Button>\n          <Button variant=\"contained\" onClick={handleClickApply}>\n            Apply\n          </Button>\n        </Box> */}\n      </Popover>\n    </Box>\n  );\n}\n\nexport default Filter;\n","import { Box, TableSortLabel } from \"@mui/material\";\nimport { visuallyHidden } from \"@mui/utils\";\nimport { Dispatch, MouseEvent, SetStateAction } from \"react\";\nimport { SortOrder } from \"../utils/types\";\n\ninterface TableHeaderSortProps {\n  column: string;\n  columnLabel: string;\n  order: SortOrder;\n  orderBy: any;\n  setOrder: Dispatch<SetStateAction<SortOrder>>;\n  setOrderBy: Dispatch<SetStateAction<any>>;\n}\n\n/** Sorts data from the header of a table */\nfunction TableHeaderSort(props: TableHeaderSortProps) {\n  const { column, columnLabel, order, orderBy, setOrder, setOrderBy } = props;\n\n  const handleRequestSort = (event: MouseEvent<unknown>, property: any) => {\n    const isAsc = orderBy === property && order === \"asc\";\n    setOrder(isAsc ? \"desc\" : \"asc\");\n    setOrderBy(property);\n  };\n\n  const createSortHandler = (property: any) => (event: MouseEvent<unknown>) => {\n    handleRequestSort(event, property);\n  };\n  return (\n    <TableSortLabel\n      active={orderBy === column}\n      direction={orderBy === column ? order : \"asc\"}\n      onClick={createSortHandler(column)}\n    >\n      {columnLabel}\n      {orderBy === column ? (\n        <Box component=\"span\" sx={visuallyHidden}>\n          {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\n        </Box>\n      ) : null}\n    </TableSortLabel>\n  );\n}\n\nexport default TableHeaderSort;\n","import {\n  Badge,\n  Box,\n  IconButton,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Typography,\n} from \"@mui/material\";\nimport { Dispatch, SetStateAction, useEffect, useState } from \"react\";\nimport { FILTERS } from \"../utils/constants\";\nimport { BalancesTableRow, SortOrder } from \"../utils/types\";\nimport Filter from \"./Filter\";\nimport { getComparator, stableSort } from \"../utils/helpers\";\nimport TableHeaderSort from \"./TableHeaderSort\";\n\ninterface BalancesTableProps {\n  rows: BalancesTableRow[];\n  setTabPosition: Dispatch<SetStateAction<number>>;\n}\n\n/** Shows the balances of all available students */\nfunction BalancesTable(props: BalancesTableProps) {\n  const { rows, setTabPosition } = props;\n  const [filteredRows, setFilteredRows] = useState(rows);\n  const [orderBy, setOrderBy] =\n    useState<keyof BalancesTableRow>(\"pendingRequests\");\n  const [order, setOrder] = useState<SortOrder>(\n    orderBy === \"pendingRequests\" ? \"desc\" : \"asc\"\n  );\n\n  useEffect(() => {\n    setFilteredRows(rows);\n  }, [rows]);\n\n  /** The filteredRows are automatically sorted each render */\n  const sortedFilteredRows = stableSort(\n    filteredRows,\n    getComparator(order, orderBy)\n  );\n\n  return (\n    <Box>\n      <Box mb={1}>\n        <Filter\n          buttonLabel=\"Filters\"\n          rows={rows}\n          filters={FILTERS.INSTRUCTOR.BALANCES}\n          filterRows={setFilteredRows}\n        />\n      </Box>\n      <TableContainer component={Paper}>\n        <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"center\" width={190}>\n                <TableHeaderSort\n                  column={\"pendingRequests\"}\n                  columnLabel={\"Pending Requests\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              <TableCell>\n                <TableHeaderSort\n                  column={\"learner_name\"}\n                  columnLabel={\"Student Name\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              <TableCell align=\"center\">\n                <TableHeaderSort\n                  column={\"tokens_used\"}\n                  columnLabel={\"Tokens Used\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              <TableCell align=\"center\">\n                <TableHeaderSort\n                  column={\"balance\"}\n                  columnLabel={\"Balance Remaining\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {!sortedFilteredRows.length ? (\n              <TableRow>\n                <TableCell colSpan={4} sx={{ textAlign: \"center\" }}>\n                  <Typography>No results</Typography>\n                </TableCell>\n              </TableRow>\n            ) : (\n              sortedFilteredRows.map((row, index) => (\n                <TableRow\n                  key={`${index}-${row.user_id}`}\n                  sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                >\n                  <TableCell align=\"center\">\n                    <Box\n                      display={\"flex\"}\n                      minHeight={35}\n                      justifyContent={\"center\"}\n                      alignContent={\"center\"}\n                    >\n                      {/* Show the icon button only if there is a reference to the learner */}\n                      {row.pendingRequests && (\n                        <IconButton\n                          onClick={() => setTabPosition(1)}\n                          disableRipple={true}\n                        >\n                          <Badge\n                            badgeContent={row.pendingRequests}\n                            color=\"warning\"\n                          ></Badge>\n                        </IconButton>\n                      )}\n                    </Box>\n                  </TableCell>\n                  <TableCell>{row.learner_name}</TableCell>\n                  <TableCell align=\"center\">{row.tokens_used}</TableCell>\n                  <TableCell align=\"center\">{row.balance}</TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Box>\n  );\n}\n\nexport default BalancesTable;\n","import { Cancel, CheckCircle, Info } from \"@mui/icons-material\";\nimport { Box, Tooltip, Typography } from \"@mui/material\";\nimport { RequestStatus } from \"../utils/types\";\n\ninterface StatusNameProps {\n  status: RequestStatus;\n  iconOnly?: boolean;\n}\n\nconst nameConfig: Record<RequestStatus, any> = {\n  ACCEPTED: {\n    icon: <CheckCircle color=\"success\" />,\n    text: \"Accepted\",\n    tooltip: \"Request has been accepted\",\n  },\n  PENDING: {\n    icon: <Info color=\"warning\" />,\n    text: \"Pending\",\n    tooltip: \"Request has not yet been accepted or rejected\",\n  },\n  REJECTED: {\n    icon: <Cancel color=\"error\" />,\n    text: \"Rejected\",\n    tooltip: \"Request has been rejected\",\n  },\n  SUBMITTED: {\n    icon: <Info color=\"warning\" />,\n    text: \"Pending\",\n    tooltip: \"Request has not yet been accepted or rejected\",\n  },\n};\n\n/** Shows the mapped status name and an icon */\nfunction StatusName(props: StatusNameProps) {\n  const { status, iconOnly } = props;\n\n  return (\n    <Box display={\"flex\"} alignItems={\"center\"}>\n      <Box display={\"flex\"} alignItems={\"center\"}>\n        <Tooltip title={nameConfig[status].tooltip}>\n          {nameConfig[status].icon}\n        </Tooltip>\n      </Box>\n      {!iconOnly && (\n        <Typography sx={{ ml: 1 }}>{nameConfig[status].text}</Typography>\n      )}\n    </Box>\n  );\n}\n\nexport default StatusName;\n","import {\n  Box,\n  Button,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Typography,\n  useTheme,\n} from \"@mui/material\";\nimport { HistoryTableRow, SortOrder } from \"../utils/types\";\nimport StatusName from \"./StatusName\";\nimport {\n  formatDbDate,\n  getComparator,\n  getStatusColors,\n  stableSort,\n} from \"../utils/helpers\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { AppContext } from \"../utils/context\";\nimport Filter from \"./Filter\";\nimport TableHeaderSort from \"./TableHeaderSort\";\n\ninterface HistoryTableProps {\n  rows: HistoryTableRow[];\n  filters: any[];\n  openReviewDialog: (requestId: string) => void;\n}\n\n/** Shows the history of requests of all available students */\nfunction HistoryTable(props: HistoryTableProps) {\n  const { rows, filters, openReviewDialog } = props;\n  const appInfo = useContext(AppContext);\n  const [filteredRows, setFilteredRows] = useState(rows);\n  const statusColors = getStatusColors(useTheme());\n  const [orderBy, setOrderBy] = useState<keyof HistoryTableRow>(\"updated_at\");\n  const [order, setOrder] = useState<SortOrder>(\n    orderBy === \"updated_at\" ? \"desc\" : \"asc\"\n  );\n\n  useEffect(() => {\n    // Prepare data for the table format (to ensure proper sorting)\n    rows.forEach((row) => {\n      row.status_name =\n        row.status_name === \"SUBMITTED\" ? \"PENDING\" : row.status_name;\n    });\n    setFilteredRows(rows);\n  }, [rows]);\n\n  /** The filteredRows are automatically sorted each render */\n  const sortedFilteredRows = stableSort(\n    filteredRows,\n    getComparator(order, orderBy)\n  );\n\n  return (\n    <Box>\n      <Box mb={1}>\n        <Filter\n          buttonLabel=\"Filters\"\n          rows={rows}\n          filters={filters}\n          filterRows={setFilteredRows}\n        />\n      </Box>\n      <TableContainer component={Paper}>\n        <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>\n                <TableHeaderSort\n                  column={\"updated_at\"}\n                  columnLabel={\"Last Action\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              {appInfo.isInstructor && (\n                <TableCell>\n                  <TableHeaderSort\n                    column={\"learner_name\"}\n                    columnLabel={\"Student Name\"}\n                    {...{ order, orderBy, setOrder, setOrderBy }}\n                  ></TableHeaderSort>\n                </TableCell>\n              )}\n              <TableCell>\n                <TableHeaderSort\n                  column={\"category_name\"}\n                  columnLabel={\"Request\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              <TableCell>\n                <TableHeaderSort\n                  column={\"status_name\"}\n                  columnLabel={\"Status\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              <TableCell align=\"center\">Action</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {!sortedFilteredRows.length ? (\n              <TableRow>\n                <TableCell colSpan={5} sx={{ textAlign: \"center\" }}>\n                  <Typography>No results</Typography>\n                </TableCell>\n              </TableRow>\n            ) : (\n              sortedFilteredRows.map((row, index) => (\n                <TableRow\n                  key={`${index}-${row.request_id}`}\n                  sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                >\n                  <TableCell\n                    sx={{\n                      borderLeft: `5px solid ${\n                        statusColors[row.status_name]\n                      } !important`,\n                    }}\n                  >\n                    {formatDbDate(row.updated_at)}\n                  </TableCell>\n                  {appInfo.isInstructor && (\n                    <TableCell component=\"th\" scope=\"row\">\n                      {row.learner_name}\n                    </TableCell>\n                  )}\n                  <TableCell>{row.category_name}</TableCell>\n                  <TableCell>\n                    <StatusName status={row.status_name} />\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <Button\n                      variant=\"contained\"\n                      onClick={() => openReviewDialog(row.request_id)}\n                    >\n                      Review\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Box>\n  );\n}\n\nexport default HistoryTable;\n","import {\n  Box,\n  Button,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Typography,\n} from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport { FILTERS } from \"../utils/constants\";\nimport { formatDbDate, getComparator, stableSort } from \"../utils/helpers\";\nimport { RequestsTableRow, SortOrder } from \"../utils/types\";\nimport Filter from \"./Filter\";\nimport TableHeaderSort from \"./TableHeaderSort\";\n\ninterface RequestsTableProps {\n  rows: RequestsTableRow[];\n  openReviewDialog: (requestId: string) => void;\n}\n\n/** Shows the requests of all available students */\nfunction RequestsTable(props: RequestsTableProps) {\n  const { rows, openReviewDialog } = props;\n  const [filteredRows, setFilteredRows] = useState(rows);\n  const [orderBy, setOrderBy] = useState<keyof RequestsTableRow>(\"created_at\");\n  const [order, setOrder] = useState<SortOrder>(\n    orderBy === \"created_at\" ? \"desc\" : \"asc\"\n  );\n\n  useEffect(() => {\n    setFilteredRows(rows);\n  }, [rows]);\n\n  /** The filteredRows are automatically sorted each render */\n  const sortedFilteredRows = stableSort(\n    filteredRows,\n    getComparator(order, orderBy)\n  );\n\n  return (\n    <Box>\n      <Box mb={1}>\n        <Filter\n          buttonLabel=\"Filters\"\n          rows={rows}\n          filters={FILTERS.INSTRUCTOR.REQUESTS}\n          filterRows={setFilteredRows}\n        />\n      </Box>\n      <TableContainer component={Paper}>\n        <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>\n                <TableHeaderSort\n                  column={\"created_at\"}\n                  columnLabel={\"Request Date\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              <TableCell>\n                <TableHeaderSort\n                  column={\"learner_name\"}\n                  columnLabel={\"Student Name\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              <TableCell>\n                <TableHeaderSort\n                  column={\"category_name\"}\n                  columnLabel={\"Request\"}\n                  {...{ order, orderBy, setOrder, setOrderBy }}\n                ></TableHeaderSort>\n              </TableCell>\n              <TableCell>Description</TableCell>\n              <TableCell align=\"center\">Action</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {!sortedFilteredRows.length ? (\n              <TableRow>\n                <TableCell colSpan={4} sx={{ textAlign: \"center\" }}>\n                  <Typography>No results</Typography>\n                </TableCell>\n              </TableRow>\n            ) : (\n              sortedFilteredRows.map((row, index) => (\n                <TableRow\n                  key={`${index}-${row.request_id}`}\n                  sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                >\n                  <TableCell>{formatDbDate(row.created_at)}</TableCell>\n                  <TableCell>{row.learner_name}</TableCell>\n                  <TableCell>{row.category_name}</TableCell>\n                  <TableCell\n                    sx={{\n                      maxWidth: 200,\n                      overflow: \"hidden\",\n                      textOverflow: \"ellipsis\",\n                      whiteSpace: \"nowrap\",\n                    }}\n                  >\n                    {row.learner_comment}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    <Button\n                      variant=\"contained\"\n                      onClick={() => openReviewDialog(row.request_id)}\n                    >\n                      Review\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Box>\n  );\n}\n\nexport default RequestsTable;\n","import { Box } from \"@mui/material\";\nimport { useContext } from \"react\";\nimport { AppContext } from \"../utils/context\";\n\ninterface TokenGraphicProps {\n  count: number;\n  size: \"small\" | \"large\";\n  disabled?: boolean;\n}\n\nconst styleReference = {\n  large: {\n    color: \"black\",\n    fontSize: \"150px\",\n    outerRim: {\n      size: \"300px\",\n      color: \"#DDCB6B\",\n      border: \"4px dotted #CBB95A\",\n    },\n    innerRim: {\n      size: \"250px\",\n      color: \"#AA8500\",\n      border: \"none\",\n    },\n    inner: {\n      size: \"245px\",\n      color: \"#CBB95A\",\n      border: \"none\",\n    },\n  },\n  small: {\n    color: \"black\",\n    fontSize: \"18px\",\n    outerRim: {\n      size: \"30px\",\n      color: \"#DDCB6B\",\n      border: \"none\",\n    },\n    innerRim: {\n      size: \"24px\",\n      color: \"#AA8500\",\n      border: \"none\",\n    },\n    inner: {\n      size: \"22px\",\n      color: \"#CBB95A\",\n      border: \"none\",\n    },\n  },\n  disabled: {\n    light: {\n      color: \"#888\",\n      outerRim: {\n        color: \"#ccc\",\n      },\n      innerRim: {\n        color: \"#aaa\",\n      },\n      inner: {\n        color: \"#bbb\",\n      },\n    },\n    dark: {\n      color: \"#222\",\n      outerRim: {\n        color: \"#777\",\n      },\n      innerRim: {\n        color: \"#666\",\n      },\n      inner: {\n        color: \"#888\",\n      },\n    },\n  },\n};\n\n/** Show a graphic of a token */\nfunction TokenGraphic(props: TokenGraphicProps) {\n  const { count, disabled, size } = props;\n\n  const appContext = useContext(AppContext);\n\n  const mode = appContext.darkMode ? \"dark\" : \"light\";\n\n  const stacked = size === \"small\" && count > 1;\n\n  // SHADOW\n  // BEVEL NUMBER\n  const generateTokenStyles = (\n    referenceKey: \"outerRim\" | \"innerRim\" | \"inner\"\n  ) => {\n    return {\n      height: styleReference[size][referenceKey].size,\n      width: styleReference[size][referenceKey].size,\n      borderRadius: 50,\n      border: styleReference[size][referenceKey].border,\n      sx: {\n        backgroundColor: disabled\n          ? styleReference.disabled[mode][referenceKey].color\n          : styleReference[size][referenceKey].color,\n        fontSize: styleReference[size].fontSize,\n        color: disabled\n          ? styleReference.disabled[mode].color\n          : styleReference[size].color,\n      },\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n    };\n  };\n\n  return (\n    <Box position={\"relative\"}>\n      <Box\n        {...generateTokenStyles(\"outerRim\")}\n        position={stacked ? \"absolute\" : \"inherit\"}\n        left={stacked ? 5 : 0}\n        border={styleReference[size].outerRim.border}\n      >\n        <Box {...generateTokenStyles(\"innerRim\")}>\n          <Box {...generateTokenStyles(\"inner\")}>{count}</Box>\n        </Box>\n      </Box>\n      {stacked && (\n        <Box\n          {...generateTokenStyles(\"outerRim\")}\n          border={styleReference[size].outerRim.border}\n        >\n          <Box {...generateTokenStyles(\"innerRim\")}>\n            <Box {...generateTokenStyles(\"inner\")}></Box>\n          </Box>\n        </Box>\n      )}\n    </Box>\n  );\n}\n\nexport default TokenGraphic;\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormLabel,\n  Radio,\n  RadioGroup,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { ChangeEvent, useContext, useEffect, useState } from \"react\";\nimport { AppContext } from \"../utils/context\";\nimport { formatDbDate } from \"../utils/helpers\";\nimport {\n  RequestsTableRow,\n  RequestStatus,\n  RequestUpdateData,\n} from \"../utils/types\";\nimport StatusName from \"./StatusName\";\nimport TokenGraphic from \"./TokenGraphic\";\n\ninterface ReviewDialogProps {\n  handleClose: (event?: object, reason?: string) => void;\n  handleSave: (submission: RequestUpdateData) => void;\n  open: boolean;\n  requestRow: RequestsTableRow | null;\n}\n\n/** Show settings form */\nfunction ReviewDialog(props: ReviewDialogProps) {\n  const { handleClose, handleSave, open, requestRow } = props;\n  const appInfo = useContext(AppContext);\n\n  const [actionStatus, setActionStatus] = useState<RequestStatus>();\n  const [comment, setComment] = useState<string>();\n  const [readonly, setReadonly] = useState<boolean>(true);\n\n  useEffect(() => {\n    if (open) {\n      setActionStatus(undefined);\n      setComment(undefined);\n    }\n  }, [open]);\n\n  useEffect(() => {\n    if (requestRow?.status_name) {\n      setReadonly(\n        !appInfo.isInstructor ||\n          ![\"PENDING\", \"SUBMITTED\"].includes(requestRow?.status_name)\n      );\n    }\n  }, [appInfo, requestRow]);\n\n  /** Handles submission of the form data */\n  const onSubmit = (e: any) => {\n    e.preventDefault();\n    if (requestRow && actionStatus) {\n      const submission: RequestUpdateData = {\n        request_id: requestRow.request_id,\n        status_name: actionStatus,\n      };\n      if (actionStatus === \"REJECTED\") {\n        submission.instructor_comment = comment;\n      }\n      handleSave(submission);\n    }\n  };\n\n  const handleActionChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const newStatus = e.target.value as RequestStatus;\n    if (newStatus === \"ACCEPTED\") {\n      setComment(\"\");\n    }\n    setActionStatus(newStatus);\n  };\n\n  const handleCommentChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const commentVal = e.target.value;\n    setComment(commentVal);\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose}>\n      {requestRow && (\n        <Box p={2}>\n          <form onSubmit={onSubmit}>\n            <DialogTitle>Review Request</DialogTitle>\n            <DialogContent>\n              <Box mb={3}>\n                <DialogContentText>\n                  Review or take action on a token request.\n                </DialogContentText>\n              </Box>\n\n              {/* LEARNER NAME */}\n              <Box display={\"flex\"} mt={1} mb={2} alignItems={\"center\"}>\n                <Box mr={2}>\n                  <FormLabel>\n                    <Typography fontWeight={\"bold\"}>Requester:</Typography>\n                  </FormLabel>\n                </Box>\n                <Typography>{requestRow.learner_name}</Typography>\n              </Box>\n              {/* REQUEST DATE */}\n              <Box display={\"flex\"} mt={1} mb={2} alignItems={\"center\"}>\n                <Box mr={2}>\n                  <FormLabel>\n                    <Typography fontWeight={\"bold\"}>Date:</Typography>\n                  </FormLabel>\n                </Box>\n                <Typography>{formatDbDate(requestRow.created_at)}</Typography>\n              </Box>\n              {/* REQUEST TYPE */}\n              <Box display={\"flex\"} mt={1} mb={2} alignItems={\"center\"}>\n                <Box mr={2}>\n                  <FormLabel>\n                    <Typography fontWeight={\"bold\"}>Type:</Typography>\n                  </FormLabel>\n                </Box>\n                <Typography>{requestRow.category_name}</Typography>\n                <Box ml={1}>\n                  <TokenGraphic size=\"small\" count={requestRow.token_cost} />\n                </Box>\n              </Box>\n              {/* REQUESTER COMMENT */}\n              <Box display={\"flex\"} flexDirection={\"column\"} mt={1} mb={2}>\n                <Box mb={2}>\n                  <FormLabel>\n                    <Typography fontWeight={\"bold\"}>\n                      Requester Description:\n                    </Typography>\n                  </FormLabel>\n                </Box>\n                <Box pl={2}>\n                  <TextField\n                    fullWidth\n                    aria-label=\"Description of request as made by the requester\"\n                    value={requestRow.learner_comment || \"\"}\n                    multiline\n                    minRows={1}\n                    maxRows={6}\n                    InputProps={{\n                      readOnly: true,\n                    }}\n                  />\n                </Box>\n              </Box>\n              {/* INSTRUCTOR ACTION CHOICE */}\n              {readonly ? (\n                <Box>\n                  {/* DISPLAY ACTION TAKEN */}\n                  <Box display={\"flex\"} mt={1} mb={2} alignItems={\"center\"}>\n                    <Box mr={2}>\n                      <FormLabel>\n                        <Typography fontWeight={\"bold\"}>\n                          Instructor Action:\n                        </Typography>\n                      </FormLabel>\n                    </Box>\n                    <StatusName status={requestRow.status_name} />\n                  </Box>\n                  {/* DISPLAY ACTION TAKEN */}\n                  {requestRow.status_name !== \"SUBMITTED\" && (\n                    <Box display={\"flex\"} mt={1} mb={2} alignItems={\"center\"}>\n                      <Box mr={2}>\n                        <FormLabel>\n                          <Typography fontWeight={\"bold\"}>\n                            Action Date:\n                          </Typography>\n                        </FormLabel>\n                      </Box>\n                      <Typography>\n                        {formatDbDate(requestRow.status_updated_at)}\n                      </Typography>\n                    </Box>\n                  )}\n                  {requestRow.status_name === \"REJECTED\" && (\n                    <Box\n                      display={\"flex\"}\n                      flexDirection={\"column\"}\n                      mt={1}\n                      mb={2}\n                    >\n                      {/* INSTRUCTOR COMMENT */}\n                      <Box mb={2}>\n                        <FormLabel>\n                          <Typography fontWeight={\"bold\"}>\n                            Instructor Comment:\n                          </Typography>\n                        </FormLabel>\n                      </Box>\n                      <Box pl={2}>\n                        <TextField\n                          fullWidth\n                          aria-label=\"A comment on the request made by the instructor\"\n                          value={requestRow.instructor_comment || \"\"}\n                          multiline\n                          minRows={1}\n                          maxRows={6}\n                          InputProps={{\n                            readOnly: true,\n                          }}\n                        />\n                      </Box>\n                    </Box>\n                  )}\n                </Box>\n              ) : (\n                <Box>\n                  <FormControl>\n                    <FormLabel>\n                      <Typography fontWeight={\"bold\"}>\n                        Instructor Action:\n                      </Typography>\n                    </FormLabel>\n                    <Box pl={2}>\n                      <RadioGroup\n                        id=\"instructor-action\"\n                        name=\"instructor-action\"\n                        aria-labelledby=\"instructor-action\"\n                        onChange={handleActionChange}\n                      >\n                        <FormControlLabel\n                          value=\"ACCEPTED\"\n                          control={<Radio required />}\n                          label=\"Accept\"\n                        />\n                        <FormControlLabel\n                          value=\"REJECTED\"\n                          control={<Radio required />}\n                          label=\"Reject\"\n                        />\n                      </RadioGroup>\n                    </Box>\n                  </FormControl>\n                  {actionStatus === \"REJECTED\" && (\n                    <Box\n                      display={\"flex\"}\n                      flexDirection={\"column\"}\n                      mt={1}\n                      mb={2}\n                    >\n                      <Box mb={2}>\n                        <FormLabel>\n                          <Typography fontWeight={\"bold\"}>\n                            Instructor Comment:\n                          </Typography>\n                        </FormLabel>\n                      </Box>\n                      <Box pl={2}>\n                        <TextField\n                          fullWidth\n                          required\n                          aria-label=\"An input for the instructor to comment on the request\"\n                          multiline\n                          rows={6}\n                          value={comment}\n                          onChange={handleCommentChange}\n                        />\n                      </Box>\n                    </Box>\n                  )}\n                </Box>\n              )}\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleClose} variant=\"outlined\">\n                {readonly ? \"Close\" : \"Cancel\"}\n              </Button>\n              {!readonly && (\n                <Button variant=\"contained\" type=\"submit\">\n                  Save\n                </Button>\n              )}\n            </DialogActions>\n          </form>\n        </Box>\n      )}\n    </Dialog>\n  );\n}\n\nexport default ReviewDialog;\n","import {\n  Add,\n  Cancel,\n  InfoOutlined,\n  KeyboardArrowDown,\n  KeyboardArrowUp,\n} from \"@mui/icons-material\";\nimport {\n  Box,\n  Button,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  IconButton,\n  InputLabel,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@mui/material\";\nimport { DateTime } from \"luxon\";\nimport { useCallback, useEffect } from \"react\";\nimport { useFieldArray, useForm } from \"react-hook-form\";\nimport { DB_DATE_TIME_FORMAT } from \"../utils/constants\";\nimport { TokensSettings } from \"../utils/types\";\n\ninterface SettingsDialogProps {\n  handleClose: (event?: object, reason?: string) => void;\n  handleSave: (newSettings: TokensSettings) => void;\n  open: boolean;\n  settings: TokensSettings | null;\n}\n\n/** Show settings form */\nfunction SettingsDialog(props: SettingsDialogProps) {\n  const { handleClose, handleSave, open, settings } = props;\n\n  // Form management\n  const {\n    control,\n    register,\n    handleSubmit,\n    watch,\n    setValue,\n    formState: { errors },\n  } = useForm<TokensSettings>({\n    defaultValues: {\n      categories: [\n        {\n          category_name: \"Missed Class\",\n          token_cost: 1,\n          dbAction: \"ADD\",\n          sort_order: 0,\n        },\n        {\n          category_name: \"Late Assignment\",\n          token_cost: 1,\n          dbAction: \"ADD\",\n          sort_order: 1,\n        },\n      ],\n      notifications_pref: true,\n    },\n  });\n  const { fields, append, move, update, remove } = useFieldArray({\n    control, // control props comes from useForm (optional: if you are using FormContext)\n    name: \"categories\", // unique name for your Field Array\n  });\n\n  const pref = watch(\"notifications_pref\", true);\n\n  const initValues = useCallback(\n    (settings: TokensSettings) => {\n      const formattedDate = DateTime.fromFormat(\n        settings.use_by_date,\n        DB_DATE_TIME_FORMAT\n      ).toISODate();\n      setValue(\"configuration_id\", settings.configuration_id);\n      setValue(\"initial_tokens\", settings.initial_tokens);\n      setValue(\"notifications_pref\", settings.notifications_pref);\n      setValue(\"use_by_date\", formattedDate);\n      setValue(\"categories\", settings.categories);\n    },\n    [setValue]\n  );\n\n  useEffect(() => {\n    if (settings && open) {\n      initValues(settings);\n    }\n  }, [settings, open, initValues]);\n\n  const moveCategoryUp = (i: number) => {\n    move(i, i - 1);\n  };\n\n  const moveCategoryDown = (i: number) => {\n    move(i, i + 1);\n  };\n\n  /** Append a new empty category to the form */\n  const handleAddCategory = () => {\n    append({ sort_order: fields.length });\n  };\n\n  /** Indicates whether less than the minimum number of categories exists */\n  const onlyOneCategoryExists = () => {\n    const validCategories = fields.filter((category) => {\n      return category.dbAction !== \"DELETE\";\n    });\n    return validCategories.length <= 1;\n  };\n\n  /** Marks a category for deletion */\n  const handleDeleteCategory = (index: number) => {\n    if (fields[index].category_id) {\n      fields[index].dbAction = \"DELETE\";\n      update(index, {\n        ...fields[index],\n        dbAction: \"DELETE\",\n      });\n    } else {\n      remove(index);\n    }\n  };\n\n  /** Handles submission of the form data */\n  const onSubmit = (data: TokensSettings) => {\n    // Assemble main data\n    const settingsToSubmit: TokensSettings = {\n      configuration_id: settings?.configuration_id,\n      initial_tokens:\n        typeof data.initial_tokens === \"number\"\n          ? data.initial_tokens\n          : parseInt(data.initial_tokens),\n      use_by_date: data.use_by_date,\n      notifications_pref: data.notifications_pref,\n      categories: data.categories,\n    };\n    // Update any category dbActions and sortOrder\n    settingsToSubmit.categories.forEach((category, i) => {\n      category.sort_order = i;\n      if (category.category_id && !category.dbAction) {\n        category.dbAction = \"UPDATE\";\n      } else if (!category.category_id && !category.dbAction) {\n        category.dbAction = \"ADD\";\n      }\n    });\n    handleSave(settingsToSubmit);\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose}>\n      <Box p={2}>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <DialogTitle>Instructor Settings</DialogTitle>\n          <DialogContent>\n            {settings && (\n              <Box mb={3}>\n                <DialogContentText>\n                  View or update the settings for your token economy.\n                </DialogContentText>\n              </Box>\n            )}\n            {/* INITIAL TOKEN COUNT */}\n            <Box display={\"flex\"} mt={1} mb={2}>\n              <Box minWidth={300} width={300} mr={2} mt={1}>\n                <InputLabel htmlFor=\"token-count\" sx={{ whiteSpace: \"normal\" }}>\n                  <Typography fontWeight={\"bold\"}>\n                    Amount of tokens to be available for each student:\n                  </Typography>\n                </InputLabel>\n              </Box>\n              <Box minWidth={150} width={150}>\n                <TextField\n                  autoFocus\n                  margin=\"dense\"\n                  size=\"small\"\n                  id=\"token-count\"\n                  type=\"number\"\n                  error={!!errors.initial_tokens}\n                  InputLabelProps={{ shrink: false }}\n                  InputProps={{\n                    inputProps: {\n                      style: { textAlign: \"center\" },\n                    },\n                  }}\n                  {...register(\"initial_tokens\", {\n                    required: true,\n                    pattern: /^[0-9]+$/,\n                    min: 1,\n                  })}\n                  helperText={\n                    errors.initial_tokens && \"Must be a positive whole number\"\n                  }\n                />\n              </Box>\n            </Box>\n            {/* EXPIRATION / USE BY DATE */}\n            <Box display={\"flex\"} mb={2}>\n              <Box minWidth={300} mr={2} mt={2}>\n                <InputLabel htmlFor=\"use-by-date\">\n                  <Typography fontWeight={\"bold\"}>\n                    Date that tokens must be used by:\n                  </Typography>\n                </InputLabel>\n              </Box>\n              <Box>\n                <TextField\n                  margin=\"dense\"\n                  size=\"small\"\n                  id=\"use-by-date\"\n                  type=\"date\"\n                  error={!!errors.use_by_date}\n                  InputLabelProps={{ shrink: false }}\n                  {...register(\"use_by_date\", {\n                    required: true,\n                  })}\n                  helperText={errors.use_by_date && \"Must be a valid date\"}\n                />\n              </Box>\n            </Box>\n            {/* EMAIL NOTIFICATIONS */}\n            <Box mb={2}>\n              <Box\n                display={\"flex\"}\n                justifyContent={\"start\"}\n                alignItems={\"center\"}\n              >\n                <Box mr={3}>\n                  <InputLabel htmlFor=\"email-pref\">\n                    <Typography fontWeight={\"bold\"}>\n                      Email notifications:\n                    </Typography>\n                  </InputLabel>\n                </Box>\n                <Checkbox\n                  color=\"default\"\n                  // Make sure it is a boolean or it will change between defined/undefined (uncontrolled)\n                  checked={!!pref}\n                  inputProps={{\n                    \"aria-label\": \"Email notifications preference checkbox\",\n                  }}\n                  {...register(\"notifications_pref\")}\n                />\n              </Box>\n              <Box mb={3}>\n                <Typography variant=\"body2\">\n                  Receive emails when students use tokens.\n                </Typography>\n              </Box>\n            </Box>\n            {/* CATEGORY SELECTION */}\n            <Box display={\"flex\"} flexDirection={\"column\"}>\n              <Box display={\"flex\"}>\n                <Box minWidth={330} mr={2}>\n                  <InputLabel htmlFor=\"category-name-input-0\">\n                    <Typography fontWeight={\"bold\"}>Categories:</Typography>\n                  </InputLabel>\n                </Box>\n                <Box\n                  minWidth={150}\n                  width={150}\n                  display={\"flex\"}\n                  alignItems={\"center\"}\n                >\n                  <Tooltip\n                    title=\"The amount of tokens a student would need to spend.\"\n                    placement=\"top\"\n                  >\n                    <InfoOutlined sx={{ mr: 1 }} fontSize=\"small\" />\n                  </Tooltip>\n                  <InputLabel htmlFor=\"category-token-input-0\">\n                    <Typography fontWeight={\"bold\"}>Token Cost:</Typography>\n                  </InputLabel>\n                </Box>\n              </Box>\n              <Box display={\"flex\"} flexDirection={\"column\"}>\n                {fields.map((category, i) => {\n                  return (\n                    <Box key={category.id}>\n                      {/* Categories are only shown if not marked for deletion */}\n                      {category.dbAction !== \"DELETE\" && (\n                        <Box display={\"flex\"}>\n                          <Box>\n                            <IconButton\n                              size=\"small\"\n                              disabled={i === 0}\n                              disableRipple\n                              onClick={() => moveCategoryUp(i)}\n                            >\n                              <KeyboardArrowUp fontSize=\"small\" />\n                            </IconButton>\n                            <IconButton\n                              size=\"small\"\n                              disabled={i === fields.length - 1}\n                              disableRipple\n                              onClick={() => moveCategoryDown(i)}\n                            >\n                              <KeyboardArrowDown fontSize=\"small\" />\n                            </IconButton>\n                          </Box>\n                          <Box minWidth={300} mr={2}>\n                            <TextField\n                              margin=\"dense\"\n                              size=\"small\"\n                              id={`category-name-${i}`}\n                              type=\"text\"\n                              placeholder=\"Enter category name...\"\n                              InputLabelProps={{ shrink: false }}\n                              InputProps={{\n                                inputProps: { style: { minWidth: 250 } },\n                              }}\n                              helperText={\n                                errors.categories?.[i]?.category_name &&\n                                \"A category name is required\"\n                              }\n                              //   error\n                              error={!!errors.categories?.[i]?.category_name}\n                              {...register(`categories.${i}.category_name`, {\n                                required: true,\n                              })}\n                            />\n                          </Box>\n                          <Box\n                            display={\"flex\"}\n                            alignItems={\"start\"}\n                            minWidth={200}\n                          >\n                            <Box minWidth={150} width={150}>\n                              <TextField\n                                disabled={category.is_used}\n                                margin=\"dense\"\n                                size=\"small\"\n                                id={`category-token-${i}`}\n                                type=\"number\"\n                                InputLabelProps={{ shrink: false }}\n                                InputProps={{\n                                  inputProps: {\n                                    style: { textAlign: \"center\" },\n                                  },\n                                }}\n                                error={!!errors.categories?.[i]?.token_cost}\n                                helperText={\n                                  errors.categories?.[i]?.token_cost &&\n                                  \"Must be a positive whole number\"\n                                }\n                                {...register(`categories.${i}.token_cost`, {\n                                  required: true,\n                                  pattern: /^[0-9]+$/,\n                                  min: 1,\n                                })}\n                              />\n                            </Box>\n                            <Box ml={1} mt={1}>\n                              <Tooltip\n                                title={\n                                  category.is_used\n                                    ? \"Category is associated with a request and cannot be deleted\"\n                                    : \"\"\n                                }\n                              >\n                                <div>\n                                  <IconButton\n                                    disabled={\n                                      category.is_used ||\n                                      onlyOneCategoryExists()\n                                    }\n                                    onClick={() => handleDeleteCategory(i)}\n                                  >\n                                    <Cancel />\n                                  </IconButton>\n                                </div>\n                              </Tooltip>\n                            </Box>\n                          </Box>\n                        </Box>\n                      )}\n                    </Box>\n                  );\n                })}\n              </Box>\n              <Box mt={2}>\n                <Button\n                  variant=\"contained\"\n                  startIcon={<Add />}\n                  onClick={handleAddCategory}\n                >\n                  New Category\n                </Button>\n              </Box>\n            </Box>\n          </DialogContent>\n          <DialogActions>\n            {settings?.configuration_id && (\n              <Button onClick={handleClose} variant=\"outlined\">\n                Cancel\n              </Button>\n            )}\n            <Button variant=\"contained\" type=\"submit\">\n              Save\n            </Button>\n          </DialogActions>\n        </form>\n      </Box>\n    </Dialog>\n  );\n}\n\nexport default SettingsDialog;\n","import { Box } from \"@mui/material\";\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\n/** Generic wrapper for tab panel content */\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nexport default TabPanel;\n","import { NotificationImportant, Settings } from \"@mui/icons-material\";\nimport {\n  Alert,\n  Badge,\n  Box,\n  IconButton,\n  Tab,\n  Tabs,\n  Tooltip,\n} from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport BalancesTable from \"../components/BalancesTable\";\nimport HistoryTable from \"../components/HistoryTable\";\nimport RequestsTable from \"../components/RequestsTable\";\nimport ReviewDialog from \"../components/ReviewDialog\";\nimport SettingsDialog from \"../components/SettingsDialog\";\nimport TabPanel from \"../components/TabPanel\";\nimport {\n  addSettings,\n  getAllBalances,\n  getInstructorSettings,\n  getSubmittedRequests,\n  updateRequest,\n  updateSettings,\n} from \"../utils/api-connector\";\nimport { FILTERS } from \"../utils/constants\";\nimport {\n  a11yProps,\n  compareDateTime,\n  formatDbDate,\n  sortBalancesByPriority,\n  tokensAreExpired,\n} from \"../utils/helpers\";\nimport {\n  BalancesTableRow,\n  HistoryTableRow,\n  RequestsTableRow,\n  RequestUpdateData,\n  TokensSettings,\n} from \"../utils/types\";\n\nfunction InstructorView() {\n  const [tabPosition, setTabPosition] = useState(0);\n  const [reviewDialogOpen, setReviewDialogOpen] = useState(false);\n  const [settingsDialogOpen, setSettingsDialogOpen] = useState(false);\n  const [settings, setSettings] = useState<TokensSettings | null>();\n  const [balanceRows, setBalanceRows] = useState<BalancesTableRow[]>([]);\n  const [requestRows, setRequestRows] = useState<RequestsTableRow[]>([]);\n  const [historyRows, setHistoryRows] = useState<HistoryTableRow[]>([]);\n  const [requestInReview, setRequestInReview] = useState<RequestsTableRow>();\n\n  useEffect(() => {\n    fetchAndAssembleData();\n  }, []);\n\n  useEffect(() => {\n    // When request data loads, assemble a mapping of who has pending requests\n    const newRequestMap = new Map();\n    requestRows.forEach((request) => {\n      if (newRequestMap.get(request.user_id)) {\n        newRequestMap.set(\n          request.user_id,\n          // Increment to reflect the count of pending requests\n          newRequestMap.get(request.user_id) + 1\n        );\n      } else {\n        newRequestMap.set(request.user_id, 1);\n      }\n    });\n    if (settings) {\n      getAllBalances().then((balances) => {\n        const sortedBalances = sortBalancesByPriority(balances, newRequestMap);\n        sortedBalances.forEach((row) => {\n          row.pendingRequests = newRequestMap.get(row.user_id);\n          row.balance = (settings.initial_tokens || 0) - (row.tokens_used || 0);\n        });\n        setBalanceRows(sortedBalances);\n      });\n    }\n  }, [requestRows, settings]);\n\n  useEffect(() => {\n    // If undefined, setting data may still be loading, but if null, response was received and config doesn't exist, so open the dialog\n    if (settings === null) {\n      setSettingsDialogOpen(true);\n    }\n  }, [settings]);\n\n  /** Retrieve and sort data for the requests and history tables\n   *  Balances table rows are set after loading the request data\n   *  since the balances table needs to know about pending requests\n   */\n  const fetchAndAssembleData = async () => {\n    // Retrieve and set Tokens Settings\n    const fetchedSettings = await getInstructorSettings();\n    setSettings(fetchedSettings);\n\n    // Retrieve and set rows for the Requests Table\n    const fetchedRequestRows = await getSubmittedRequests();\n    // Sort all by timestamp (requests and history will show newest first)\n    fetchedRequestRows.sort(compareDateTime);\n\n    const newlySubmittedRequests = fetchedRequestRows.filter((row) => {\n      return row.status_name === \"SUBMITTED\";\n    });\n    // newlySubmittedRequests.sort(compareLastNames);\n    setRequestRows(newlySubmittedRequests);\n    setHistoryRows(fetchedRequestRows);\n  };\n\n  // Tab management\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setTabPosition(newValue);\n  };\n\n  // Dialog management\n  const handleOpenSettingsDialog = () => {\n    setSettingsDialogOpen(true);\n  };\n\n  const handleOpenReviewDialogFromRequests = (requestId: string) => {\n    setRequestInReview(\n      requestRows.find((request) => request.request_id === requestId)\n    );\n    setReviewDialogOpen(true);\n  };\n\n  const handleOpenReviewDialogFromHistory = (requestId: string) => {\n    setRequestInReview(\n      historyRows.find((request) => request.request_id === requestId)\n    );\n    setReviewDialogOpen(true);\n  };\n\n  const handleCloseSettingsDialog = (event?: object, reason?: string) => {\n    const reasonsToStayOpen = [\"backdropClick\", \"escapeKeyDown\"];\n    if (reason && reasonsToStayOpen.includes(reason)) {\n      return;\n    }\n    setSettingsDialogOpen(false);\n  };\n\n  const handleCloseReviewDialog = (event?: object, reason?: string) => {\n    const reasonsToStayOpen = [\"backdropClick\", \"escapeKeyDown\"];\n    if (reason && reasonsToStayOpen.includes(reason)) {\n      return;\n    }\n    setReviewDialogOpen(false);\n  };\n\n  const handleSaveSettingsDialog = async (newSettings: TokensSettings) => {\n    // Need to take the new data, send the update, and fetch the new settings\n    if (newSettings.configuration_id) {\n      await updateSettings(newSettings);\n    } else {\n      await addSettings(newSettings);\n    }\n    // Close the dialog\n    setSettingsDialogOpen(false);\n    // Fetch the new/updated settings to refresh the UI\n    const retrievedSettings = await getInstructorSettings();\n    setSettings(retrievedSettings);\n  };\n\n  const handleSaveReviewDialog = async (reviewData: RequestUpdateData) => {\n    // Close the dialog\n    setReviewDialogOpen(false);\n    // Send the update\n    await updateRequest(reviewData);\n    // Refresh the data in the UI\n    await fetchAndAssembleData();\n  };\n\n  return (\n    <>\n      {settings && (\n        <Box>\n          <Box display={\"flex\"} justifyContent={\"end\"} mr={1}>\n            <Box>\n              <Tooltip\n                title={\n                  requestRows.length\n                    ? \"There are pending requests requiring review\"\n                    : \"\"\n                }\n              >\n                <IconButton onClick={() => setTabPosition(1)}>\n                  <Badge badgeContent={requestRows.length} color=\"warning\">\n                    <NotificationImportant />\n                  </Badge>\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Review or update Tokens settings\">\n                <IconButton onClick={handleOpenSettingsDialog}>\n                  <Settings />\n                </IconButton>\n              </Tooltip>\n            </Box>\n          </Box>\n          {settings.use_by_date && (\n            <Box mt={2} mb={2}>\n              {tokensAreExpired(settings) ? (\n                <Alert severity=\"warning\">\n                  Tokens expired on {formatDbDate(settings.use_by_date)}\n                </Alert>\n              ) : (\n                <Alert severity=\"info\">\n                  Tokens are set to expire on{\" \"}\n                  {formatDbDate(settings.use_by_date)}\n                </Alert>\n              )}\n            </Box>\n          )}\n          <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n            <Tabs\n              value={tabPosition}\n              onChange={handleTabChange}\n              aria-label=\"basic tabs example\"\n            >\n              <Tab label=\"Balances\" {...a11yProps(0)} />\n              <Tab label=\"Requests\" {...a11yProps(1)} />\n              <Tab label=\"History\" {...a11yProps(2)} />\n            </Tabs>\n          </Box>\n          <TabPanel value={tabPosition} index={0}>\n            <BalancesTable rows={balanceRows} setTabPosition={setTabPosition} />\n          </TabPanel>\n          <TabPanel value={tabPosition} index={1}>\n            <RequestsTable\n              rows={requestRows}\n              openReviewDialog={handleOpenReviewDialogFromRequests}\n            />\n          </TabPanel>\n          <TabPanel value={tabPosition} index={2}>\n            <HistoryTable\n              rows={historyRows}\n              filters={FILTERS.INSTRUCTOR.HISTORY}\n              openReviewDialog={handleOpenReviewDialogFromHistory}\n            />\n          </TabPanel>\n        </Box>\n      )}\n      {/* DIALOGS */}\n      <SettingsDialog\n        handleClose={handleCloseSettingsDialog}\n        handleSave={handleSaveSettingsDialog}\n        open={settingsDialogOpen}\n        settings={settings || null}\n      />\n      <ReviewDialog\n        handleClose={handleCloseReviewDialog}\n        handleSave={handleSaveReviewDialog}\n        open={reviewDialogOpen}\n        requestRow={requestInReview || null}\n      />\n    </>\n  );\n}\n\nexport default InstructorView;\n","import { Box, Typography } from \"@mui/material\";\nimport TokenGraphic from \"./TokenGraphic\";\n\ninterface RequestBalanceProps {\n  balance: number;\n}\n\n/** Show learner's balance info */\nfunction RequestBalance(props: RequestBalanceProps) {\n  const { balance } = props;\n  return (\n    <Box>\n      <Box mb={4} display={\"flex\"} justifyContent={\"center\"}>\n        <Typography fontSize={30}>Token Balance</Typography>\n      </Box>\n      <Box display={\"flex\"} justifyContent={\"center\"}>\n        <TokenGraphic count={balance} size=\"large\" />\n      </Box>\n    </Box>\n  );\n}\n\nexport default RequestBalance;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@mui/material\";\n\ninterface ConfirmationDialogProps {\n  handleClose: () => void;\n  handleConfirm: () => void;\n  open: boolean;\n}\n\nexport default function ConfirmationDialog(props: ConfirmationDialogProps) {\n  const { handleClose, handleConfirm, open } = props;\n  return (\n    <div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"confirmation-dialog-title\"\n        aria-describedby=\"confirmation-dialog-description\"\n      >\n        <DialogTitle id=\"confirmation-dialog-title\">Confirmation</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"confirmation-dialog-description\">\n            Are you sure you want to submit this token request?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} variant=\"outlined\">\n            Cancel\n          </Button>\n          <Button onClick={handleConfirm} autoFocus variant={\"contained\"}>\n            Confirm\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import { Box, Button, TextField, Typography } from \"@mui/material\";\nimport { Dispatch, FormEvent, SetStateAction, useState } from \"react\";\nimport { addRequest } from \"../utils/api-connector\";\nimport { tokensAreExpired } from \"../utils/helpers\";\nimport { TokensCategory, TokensSettings } from \"../utils/types\";\nimport ConfirmationDialog from \"./ConfirmationDialog\";\nimport TokenGraphic from \"./TokenGraphic\";\n\ninterface RequestFormProps {\n  balance: number;\n  categories: TokensCategory[];\n  updateBalance: Dispatch<SetStateAction<number>>;\n  resetBalance: () => void;\n  refreshData: () => Promise<void>;\n  settings: TokensSettings;\n}\n\n/** Show learner's token request form */\nfunction RequestForm(props: RequestFormProps) {\n  const {\n    balance,\n    categories,\n    updateBalance,\n    resetBalance,\n    refreshData,\n    settings,\n  } = props;\n  const sortedCategories = categories.sort((a, b) => {\n    return a.sort_order - b.sort_order;\n  });\n  const [openDialog, setOpenDialog] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n\n  const [selectedCategory, setSelectedCategory] = useState<TokensCategory>();\n  const [learnerComment, setLearnerComment] = useState<string>(\"\");\n\n  const handleSelectCategory = (category: TokensCategory) => {\n    updateBalance(balance - category.token_cost);\n    setSelectedCategory(category);\n  };\n\n  const handleCancelRequest = () => {\n    setSelectedCategory(undefined);\n    resetBalance();\n  };\n\n  const handleSubmitRequest = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setOpenDialog(true);\n  };\n\n  const handleConfirmDialog = async () => {\n    if (selectedCategory?.category_id && learnerComment) {\n      setOpenDialog(false);\n      // API call to submit request - it will ensure it does not result in negative balance\n      await addRequest(selectedCategory.category_id, learnerComment);\n      // Refresh the data (rows at learner view level)\n      await refreshData();\n      // This will make a submission message appear that the learner can dismiss\n      setSubmitted(true);\n    }\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n  };\n\n  const handleDismissConfirmation = () => {\n    setSelectedCategory(undefined);\n    setSubmitted(false);\n  };\n\n  return (\n    <Box>\n      {!selectedCategory ? (\n        <>\n          <Box mb={4}>\n            <Typography fontSize={30}>Request</Typography>\n          </Box>\n          <Box mb={4}>\n            <Typography>\n              Use tokens by selecting one of the requests below.\n            </Typography>\n          </Box>\n          <Box display={\"flex\"} flexDirection={\"column\"}>\n            {sortedCategories.map((category) => (\n              <Button\n                disabled={\n                  balance - category.token_cost < 0 ||\n                  (settings && tokensAreExpired(settings))\n                }\n                key={`category-${category.category_id}`}\n                size=\"large\"\n                sx={{ mb: 2 }}\n                variant=\"contained\"\n                onClick={() => handleSelectCategory(category)}\n              >\n                <Box\n                  display={\"flex\"}\n                  justifyContent={\"space-between\"}\n                  width={\"100%\"}\n                  alignItems={\"center\"}\n                >\n                  <Typography textTransform={\"none\"}>\n                    {category.category_name}\n                  </Typography>\n                  <TokenGraphic\n                    count={category.token_cost}\n                    size=\"small\"\n                    disabled={\n                      balance - category.token_cost < 0 ||\n                      (settings && tokensAreExpired(settings))\n                    }\n                  />\n                </Box>\n              </Button>\n            ))}\n          </Box>\n        </>\n      ) : (\n        <>\n          {!submitted ? (\n            <form onSubmit={handleSubmitRequest}>\n              <Box mb={4}>\n                <Typography fontSize={30}>Request</Typography>\n              </Box>\n              <Box mb={4}>\n                <Box display={\"flex\"} alignItems={\"center\"} mb={2}>\n                  <Typography sx={{ mr: 2 }} variant=\"h6\">\n                    {selectedCategory.category_name}\n                  </Typography>\n                  <TokenGraphic\n                    count={selectedCategory.token_cost}\n                    size=\"small\"\n                  />\n                </Box>\n                <Typography>\n                  Please provide specific details on this token request.\n                </Typography>\n                <Typography variant=\"body2\" fontStyle={\"italic\"}>\n                  Example: Assignment #3\n                </Typography>\n              </Box>\n              <Box display={\"flex\"}>\n                <TextField\n                  fullWidth\n                  required\n                  aria-label=\"Details about the request to be submitted\"\n                  multiline\n                  rows={4}\n                  onChange={(e) => setLearnerComment(e.target.value)}\n                />\n              </Box>\n              <Box display={\"flex\"} justifyContent={\"end\"} pt={2}>\n                <Button\n                  onClick={handleCancelRequest}\n                  variant=\"outlined\"\n                  sx={{ mr: 1 }}\n                >\n                  Cancel\n                </Button>\n                <Button variant=\"contained\" type=\"submit\">\n                  Submit\n                </Button>\n              </Box>\n            </form>\n          ) : (\n            <>\n              <Box mb={4}>\n                <Typography fontSize={30}>Submitted</Typography>\n              </Box>\n              <Box mb={4}>\n                <Box display={\"flex\"} alignItems={\"center\"} mb={2}>\n                  <Typography sx={{ mr: 2 }} variant=\"h6\">\n                    {selectedCategory.category_name}\n                  </Typography>\n                  <TokenGraphic\n                    count={selectedCategory.token_cost}\n                    size=\"small\"\n                  />\n                </Box>\n                <Typography sx={{ mb: 2 }}>\n                  Your request has been submitted to the instructor for review.\n                </Typography>\n                <Typography>\n                  If they have any further questions about your request, they\n                  will reach out via email.\n                </Typography>\n              </Box>\n              <Box display={\"flex\"} justifyContent={\"end\"} pt={2}>\n                <Button onClick={handleDismissConfirmation} variant=\"contained\">\n                  Done\n                </Button>\n              </Box>\n            </>\n          )}\n        </>\n      )}\n      <ConfirmationDialog\n        handleClose={handleCloseDialog}\n        handleConfirm={handleConfirmDialog}\n        open={openDialog}\n      />\n    </Box>\n  );\n}\n\nexport default RequestForm;\n","import { Box } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport { TokensSettings } from \"../utils/types\";\nimport RequestBalance from \"./RequestBalance\";\nimport RequestForm from \"./RequestForm\";\n\ninterface RequestDashboardProps {\n  balance: number;\n  settings: TokensSettings;\n  refreshData: () => Promise<void>;\n}\n\n/** Where a learner can create/submit a request */\nfunction RequestDashboard(props: RequestDashboardProps) {\n  const { balance, settings, refreshData } = props;\n  const [activeCount, setActiveCount] = useState(balance);\n\n  useEffect(() => {\n    setActiveCount(balance);\n  }, [balance]);\n\n  const resetBalance = () => {\n    setActiveCount(balance);\n  };\n\n  return (\n    <Box display={\"flex\"} justifyContent={\"space-around\"} pt={3}>\n      <Box width={\"55%\"}>\n        <RequestBalance balance={activeCount} />\n      </Box>\n      <Box width={\"45%\"}>\n        <RequestForm\n          balance={activeCount}\n          updateBalance={setActiveCount}\n          categories={settings.categories}\n          resetBalance={resetBalance}\n          refreshData={refreshData}\n          settings={settings}\n        />\n      </Box>\n    </Box>\n  );\n}\n\nexport default RequestDashboard;\n","import { Alert, Box, Tab, Tabs } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport HistoryTable from \"../components/HistoryTable\";\nimport RequestDashboard from \"../components/RequestDashboard\";\nimport ReviewDialog from \"../components/ReviewDialog\";\nimport TabPanel from \"../components/TabPanel\";\nimport {\n  getLearnerRequestHistory,\n  getLearnerSettings,\n} from \"../utils/api-connector\";\nimport { FILTERS } from \"../utils/constants\";\nimport {\n  a11yProps,\n  compareDateTime,\n  formatDbDate,\n  tokensAreExpired,\n} from \"../utils/helpers\";\nimport {\n  HistoryTableRow,\n  RequestsTableRow,\n  TokensSettings,\n} from \"../utils/types\";\n\nfunction LearnerView() {\n  const [settings, setSettings] = useState<TokensSettings | null>();\n  const [tabPosition, setTabPosition] = useState(0);\n  const [reviewDialogOpen, setReviewDialogOpen] = useState(false);\n  const [historyRows, setHistoryRows] = useState<HistoryTableRow[]>([]);\n  const [requestInReview, setRequestInReview] = useState<RequestsTableRow>();\n  const [learnerBalance, setLearnerBalance] = useState<number>(0);\n\n  useEffect(() => {\n    fetchAndAssembleData();\n  }, []);\n\n  const fetchAndAssembleData = async () => {\n    // Retrieve and set Tokens Settings\n    const fetchedSettings = await getLearnerSettings();\n    setSettings(fetchedSettings);\n    // Retrieve and set rows for the Requests Table\n    const fetchedRequestRows = await getLearnerRequestHistory();\n    // Sort all by timestamp (requests and history will show newest first)\n    fetchedRequestRows.sort(compareDateTime);\n    setHistoryRows(fetchedRequestRows);\n\n    if (fetchedSettings) {\n      const tokensUsed = fetchedRequestRows.reduce((a, b) => {\n        if (b.status_name === \"REJECTED\") {\n          return a;\n        } else {\n          return a + b.token_cost;\n        }\n      }, 0);\n      setLearnerBalance(fetchedSettings.initial_tokens - tokensUsed);\n    }\n  };\n\n  // Tab management\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setTabPosition(newValue);\n  };\n\n  // Dialog management\n  const handleOpenReviewDialogFromHistory = (requestId: string) => {\n    setRequestInReview(\n      historyRows.find((request) => request.request_id === requestId)\n    );\n    setReviewDialogOpen(true);\n  };\n\n  const handleCloseReviewDialog = (event?: object, reason?: string) => {\n    const reasonsToStayOpen = [\"backdropClick\", \"escapeKeyDown\"];\n    if (reason && reasonsToStayOpen.includes(reason)) {\n      return;\n    }\n    setReviewDialogOpen(false);\n  };\n  return (\n    <>\n      {settings ? (\n        <Box>\n          {settings.use_by_date && (\n            <Box mt={2} mb={2}>\n              {tokensAreExpired(settings) ? (\n                <Alert severity=\"warning\">\n                  Tokens expired on {formatDbDate(settings.use_by_date)}\n                </Alert>\n              ) : (\n                <Alert severity=\"info\">\n                  Tokens are set to expire on{\" \"}\n                  {formatDbDate(settings.use_by_date)}\n                </Alert>\n              )}\n            </Box>\n          )}\n          <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n            <Tabs\n              value={tabPosition}\n              onChange={handleTabChange}\n              aria-label=\"basic tabs example\"\n            >\n              <Tab label=\"Request\" {...a11yProps(0)} />\n              <Tab label=\"History\" {...a11yProps(1)} />\n            </Tabs>\n          </Box>\n          <TabPanel value={tabPosition} index={0}>\n            <RequestDashboard\n              settings={settings}\n              balance={learnerBalance}\n              refreshData={fetchAndAssembleData}\n            />\n          </TabPanel>\n          <TabPanel value={tabPosition} index={1}>\n            <HistoryTable\n              rows={historyRows}\n              filters={FILTERS.LEARNER.HISTORY}\n              openReviewDialog={handleOpenReviewDialogFromHistory}\n            />\n          </TabPanel>\n        </Box>\n      ) : (\n        <Box mt={2}>\n          <Alert severity=\"info\">\n            Your instructor has not yet configured this learning app.\n          </Alert>\n        </Box>\n      )}\n      <ReviewDialog\n        handleClose={handleCloseReviewDialog}\n        handleSave={() => {}}\n        open={reviewDialogOpen}\n        requestRow={requestInReview || null}\n      />\n    </>\n  );\n}\n\nexport default LearnerView;\n","import {\n  Box,\n  ThemeProvider,\n  createTheme,\n  CssBaseline,\n  // useMediaQuery,\n  useTheme,\n  // Snackbar,\n  // Alert,\n} from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport \"./App.scss\";\nimport DevPanel from \"./components/DevPanel\";\nimport Header from \"./components/Header\";\nimport { getInfo } from \"./utils/api-connector\";\nimport { AppContext } from \"./utils/context\";\nimport { getAppConfig, getEnvironment } from \"./utils/helpers\";\nimport { LtiAppInfo } from \"./utils/types\";\nimport InstructorView from \"./views/InstructorView\";\nimport LearnerView from \"./views/LearnerView\";\n\nfunction App() {\n  const [appConfig, setAppconfig] = useState<LtiAppInfo>();\n\n  useEffect(() => {\n    console.info(`Running in cra environment: ${getEnvironment()}`);\n    getInfo().then((info) => {\n      if (info && typeof info !== \"string\") {\n        console.info(`Application configuration information retrieved`);\n        /** Information about the environment used to create the react app */\n        const config = getAppConfig(info);\n        setAppconfig(config);\n      } else {\n        console.error(\"Unable to retrieve App Info - Session may be expired\");\n      }\n    });\n  }, []);\n\n  /** An indication that the user has set (on a compatible browser) that they prefer dark mode */\n  // const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  /** The default primary color (used if no other primary color is specified) */\n  const defaultPrimary = useTheme().palette.primary.main;\n  const darkMode = appConfig?.darkMode;\n  const main = (darkMode && \"#fff\") || appConfig?.baseColor || defaultPrimary;\n  /** Theme customizations */\n  const theme = createTheme({\n    palette: {\n      primary: {\n        main,\n      },\n      mode: darkMode ? \"dark\" : \"light\",\n    },\n    components: {\n      MuiTableCell: {\n        styleOverrides: {\n          head: {\n            fontWeight: \"bold\",\n          },\n        },\n      },\n    },\n  });\n\n  // const getSnackBarAlert = () => {\n  //   return <Alert severity=\"success\">This is a success message!</Alert>;\n  // };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <div className=\"App\">\n        {/* <Snackbar\n          anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n          autoHideDuration={6000}\n          open={true}\n          message=\"Hello there\"\n        >\n          {getSnackBarAlert()}\n        </Snackbar> */}\n        {appConfig && (\n          <AppContext.Provider value={appConfig}>\n            <Box display={\"flex\"} className=\"App-header\">\n              <Box\n                width={\"100%\"}\n                p={4}\n                height={\"100vh\"}\n                display={\"flex\"}\n                flexDirection={\"column\"}\n              >\n                <Header />\n                <Box>\n                  {/* Condition for views? */}\n                  {appConfig.isInstructor ? (\n                    <InstructorView />\n                  ) : (\n                    <LearnerView />\n                  )}\n                </Box>\n              </Box>\n            </Box>\n          </AppContext.Provider>\n        )}\n      </div>\n      {/* Only show dev panel for local development */}\n      {[\"pre_build\", \"local_build\"].includes(getEnvironment()) && <DevPanel />}\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"./index.scss\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nconst root = ReactDOM.createRoot(\n  document.getElementById(\"root\") as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { compareLastNames, getSessionId } from \"./helpers\";\nimport {\n  CraEnvironment,\n  FilterConfig,\n  LtiAppInfo,\n  LtiSessionConfig,\n  RequestStatus,\n} from \"./types\";\n\n/** For use during local development for two reasons.\n * 1. Since you cannot retrieve the sessionId from the react server\n * 2. So you don't have to rely on updating the server to check different scenarios tied to the appInfo\n */\nexport const APP_INFO_OVERRIDES: Partial<LtiAppInfo> = {\n  // apiUrl: \"\",\n  // contextId: \"\",\n  // isInstructor: true,\n  // linkId: \"\",\n  sessionId: \"080eabaf863830b5973f53e139020257\", // Learner session\n  // sessionId: \"b32e4d92c2c513248f48b1d3c87a7a23\", // Instructor session\n  // username: \"\",\n  // darkMode: true,\n  // baseColor: \"#6B5B95\", // DRK PRPL\n  baseColor: \"#0E4466\", // DRK TEAL\n  // baseColor: \"#FFADAD\", // LIGHT SALMON\n  // baseColor: \"#B3ADFF\", // LIGHT BLUE\n};\n\nconst sessionId = getSessionId();\n\nexport const EnvConfig: Record<CraEnvironment, LtiSessionConfig> = {\n  pre_build: {\n    apiUrl: \"/learning-apps/mod/mod-tokens/api/index.php\",\n    sessionId: APP_INFO_OVERRIDES.sessionId || \"\",\n  },\n  local_build: {\n    apiUrl: \"/learning-apps/mod/mod-tokens/api/index.php\",\n    sessionId,\n  },\n  deployed_build: {\n    apiUrl: \"/mod/tokens/api/index.php\",\n    sessionId,\n  },\n};\n\nexport const DB_DATE_TIME_FORMAT = \"yyyy-MM-dd HH:mm:ss\";\n\n// Filters\ninterface Filters {\n  INSTRUCTOR: InstructorFilters;\n  LEARNER: LearnerFilters;\n}\ninterface InstructorFilters {\n  BALANCES: FilterConfig[];\n  REQUESTS: FilterConfig[];\n  HISTORY: FilterConfig[];\n}\n\ninterface LearnerFilters {\n  HISTORY: FilterConfig[];\n}\nexport const FILTERS: Filters = {\n  INSTRUCTOR: {\n    BALANCES: [\n      {\n        column: \"learner_name\",\n        label: \"Learner Name\",\n        type: \"enum\",\n        sort: compareLastNames,\n      },\n    ],\n    REQUESTS: [\n      {\n        column: \"category_name\",\n        label: \"Request Type\",\n        type: \"enum\",\n      },\n      {\n        column: \"learner_name\",\n        label: \"Learner Name\",\n        type: \"enum\",\n        sort: compareLastNames,\n      },\n    ],\n    HISTORY: [\n      {\n        column: \"category_name\",\n        label: \"Request Type\",\n        type: \"enum\",\n      },\n      //   {\n      //     column: \"created_at\",\n      //     label: \"Request Date\",\n      //     type: \"date\",\n      //     // default: \"\",\n      //   },\n      {\n        column: \"status_name\",\n        label: \"Status\",\n        type: \"enum\",\n        valueMapping: (val: RequestStatus) => {\n          if (val === \"SUBMITTED\") {\n            return \"Pending\";\n          } else {\n            return val.charAt(0).toUpperCase() + val.slice(1).toLowerCase();\n          }\n        },\n      },\n      {\n        column: \"learner_name\",\n        label: \"Learner Name\",\n        type: \"enum\",\n        sort: compareLastNames,\n      },\n      //   {\n      //     column: \"learner_comment\",\n      //     label: \"Description\",\n      //     type: \"text\",\n      //     default: [],\n      //   },\n    ],\n  },\n  LEARNER: {\n    HISTORY: [\n      {\n        column: \"category_name\",\n        label: \"Request Type\",\n        type: \"enum\",\n      },\n      {\n        column: \"status_name\",\n        label: \"Status\",\n        type: \"enum\",\n        valueMapping: (val: RequestStatus) => {\n          if (val === \"SUBMITTED\") {\n            return \"Pending\";\n          } else {\n            return val.charAt(0).toUpperCase() + val.slice(1).toLowerCase();\n          }\n        },\n      },\n    ],\n  },\n};\n"],"sourceRoot":""}